<!DOCTYPE html>
<html>
<head>
    <title>M3U 超融合</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #057748;
            color: aliceblue;
        }

        .button, .addNewSubscriber, .saveButtonClassName, .deleteButtonClassName,
        .save-m3u-button, .delete-m3u-button, .changePasswordButtonClassName, .saveButtonClassName2, .deleteButtonClassName2,
        #simply, #proxy-model-switch, .toggletext, #proxy-model-switch2 {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 5px;
            margin-top: 5px;
            float: right
        }

        .button:hover {
            background-color: #3e8e41;
        }

        .saveButtonClassName, .deleteButtonClassName,
        .save-m3u-button, .delete-m3u-button, #simply {
            margin-right: 5px;
            width: 45%
        }

        .saveButtonClassName2, .deleteButtonClassName2 {
            margin-right: 3px;
            width: 29%
        }

        .changePasswordButtonClassName {
            margin-right: 3px;
            width: 38%
        }

        .suburlclassname {
            width: 70%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
        }

        .suburlclassname2 {
            width: 60%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
        }

        .subnameClassName2 {
            width: 15%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
        }

        .passwordClassName2 {
            width: 15%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
        }

        .stubboninput {
            width: 76%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
            border-radius: 5px;
            text-align: right;
            padding-top: 20px;
            padding-bottom: 20px;
        }

        .stubbonsave {
            padding: 20px 30px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            float: right;
            margin-left: 15px;
        }

        .subnameClassName,.submit-m3u-group {
            width: 20%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
        }

        .subm3uUrl, .subm3uname {
            width: 100%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
        }

        .suburlclassname, .subnameClassName, .saveButtonClassName, .deleteButtonClassName, .stepflag,
        .notice, #upload-m3u, .changePasswordButtonClassName, .suburlclassname2, .subnameClassName2,
        .passwordClassName2, .saveButtonClassName2, .deleteButtonClassName2,
        #sub-m3u, #generatepass, #savem3uareas, .save-m3u-button, .delete-m3u-button, #upload-m3u-btn,
        #download-m3u-btn, #remove-m3u-btn, #remove-m3u-btn,.submit-m3u-file,
        .uploadjsonbtn,.submit-m3u-group-sub,
        #simply, .download-json-btn, .dropdown, #proxy-model-switch, #proxy-model-switch2, .dropdown2, .stubbonsave, .removeallSubscriber, .addNewSubscriber {
            font-size: x-large;
        }

        #upload-m3u, #sub-m3u, #generatepass, #savem3uareas, #upload-m3u-btn, #download-m3u-btn, #remove-m3u-btn, #remove-m3u-btn,
        #simply, .uploadjsonbtn, .removeallSubscriber ,.submit-m3u-group,.submit-m3u-file,.submit-m3u-group-sub{
            float: right;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 5px;
            margin-top: 5px;
        }

        .deleteButtonClassName, .deleteButtonClassName2 {
            background-color: crimson;
        }

        #remove-m3u-btn, .removeallSubscriber {
            background-color: crimson;
            float: right;
            width: 25%;
        }

        #input, #output, #input2, #output2 {
            width: 90%;
            background-color: #758a99;
            color: aliceblue;
            font-size: x-large;
            border-radius: 5px;

        }

        .buttonChooseProxies, .toggletext {
            float: left;
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }

        .buttonChooseProxies.active {
            background-color: crimson;
        }

        .dropdown, .dropdown2 {

            display: block;
            float: right;
            width: 100%;
        }

        .dropdown-content, .dropdown-content2 {
            display: none;
            position: absolute;
            width: 50%;
            z-index: 1;
            border-radius: 5px;
            background-color: #4CAF50; /* 设置背景色 */
            border: 2px solid #ccc; /* 设置边框 */
        }

        .dropdown.active .dropdown-content, .dropdown2.active .dropdown-content2 {
            display: block;
        }

        .switchfunctionbutton {
            width: 60px;
            height: 30px;
            background-color: #ccc;
            border-radius: 15px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
        }

        .m3u-upload-sp{
            float: right;
            width: 100%;
            border-radius: 15px;
            margin-top: 10px;
            padding: 2px;
            border: 2px solid #ccc;
        }

        .on {
            background-color: #4CAF50;
            width: 100%;
        }

        .off {
            background-color: crimson;
            width: 100%;
        }


        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 24%);
            grid-gap: 10px;
            padding: 10px;
        }

        .grid-item {
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            border: 1px solid #ccc; /* 网格边框 */
            padding: 10px; /* 网格内边距 */
        }

        .buttongrid {
            margin-bottom: 10px; /* 按钮下方留白 */
        }

        .searchbox {
            background-color: #4CAF50;
            border: none;
            color: #fff;
            padding: 12px 20px;
            text-align: center;
            font-size: xx-large;
            border-radius: 30px;
            width: 40%;
            margin-bottom: 20px;
            background-image: linear-gradient(to bottom right, #4CAF50, #d9d9d9);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2), inset 0 -1px 1px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .searchbox:focus {
            outline: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 2px rgba(0, 0, 0, 0.2), inset 0 -1px 1px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.2);
        }


    </style>
</head>
<body onload="init()">
<div style="width:100%;display:flex; justify-content:space-between;">
    <h1 style="width: 20%">M3U 超融合</h1>
    <button id="download-json-btn7" class="button download-json-btn" style="width: 30%">一键导出全部配置</button>
    <div id="upload-json-btn7" class="uploadjsonbtn"
         style="position: relative; width: 30%; display: flex; justify-content: center; align-items: center;">
        <label for="file-upload">一键导入全部配置</label>
        <input type="file" name="file-upload"
               style="position: absolute; top: 0; left: 0; height: 100%; width: 100%; opacity: 0;"></input>
    </div>
</div>
<div id="switchbox" style="font-size: x-large">
    <label>
        <input type="radio" name="page" id="page1" checked>
        <span>直播源订阅</span>
    </label>
    <label>
        <input type="radio" name="page" id="page2">
        <span>直播源管理</span>
    </label>
    <label>
        <input type="radio" name="page" id="page3">
        <span>密码本</span>
    </label>
    <label>
        <input type="radio" name="page" id="page4">
        <span>离线工具</span>
    </label>
    <label>
        <input type="radio" name="page" id="page5">
        <span>域名白名单订阅</span>
    </label>
    <label>
        <input type="radio" name="page" id="page6">
        <span>域名黑名单订阅</span>
    </label>
    <label>
        <input type="radio" name="page" id="page7">
        <span>ipv4订阅</span>
    </label>
    <label>
        <input type="radio" name="page" id="page8">
        <span>ipv6订阅</span>
    </label>
    <label>
        <input type="radio" name="page" id="page9">
        <span>文本行去重复</span>
    </label>
    <label>
        <input type="radio" name="page" id="page10">
        <span>节点订阅-节点订阅链接</span>
    </label>
    <label>
        <input type="radio" name="page" id="page11">
        <span>节点订阅-远程配置订阅</span>
    </label>
    <label>
        <input type="radio" name="page" id="page12">
        <span>节点订阅-后端地址</span>
    </label>
    <label>
        <input type="radio" name="page" id="page13">
        <span>DNS分流器</span>
    </label>
    <label>
        <input type="radio" name="page" id="page14">
        <span>订阅密码锁</span>
    </label>
    <label>
        <input type="radio" name="page" id="page15">
        <span>同步账号</span>
    </label>
    <label>
        <input type="radio" name="page" id="page16">
        <span>M3U白名单</span>
    </label>
    <label>
        <input type="radio" name="page" id="page17">
        <span>系统配置</span>
    </label>
    <label>
        <input type="radio" name="page" id="page18">
        <span>功能开关</span>
    </label>
    <label>
        <input type="radio" name="page" id="page19">
        <span>简易DNS分流白名单</span>
    </label>
    <label>
        <input type="radio" name="page" id="page20">
        <span>简易DNS分流黑名单</span>
    </label>
    <label>
        <input type="radio" name="page" id="page21">
        <span>打赏频道</span>
    </label>
    <label>
        <input type="radio" name="page" id="page22">
        <span>订阅文件重命名</span>
    </label>
    <label>
        <input type="radio" name="page" id="page23">
        <span>M3U垃圾过滤</span>
    </label>
    <label>
        <input type="radio" name="page" id="page24">
        <span>M3U白名单分组优先级</span>
    </label>
    <label>
        <input type="radio" name="page" id="page25">
        <span>网络配置文件下载加密上传</span>
    </label>
    <label>
        <input type="radio" name="page" id="page26">
        <span>网络配置文件下载解密</span>
    </label>
    <label>
        <input type="radio" name="page" id="page27">
        <span>Youtube直播源</span>
    </label>
    <label>
        <input type="radio" name="page" id="page28">
        <span>BiliBili直播源</span>
    </label>
    <label>
        <input type="radio" name="page" id="page29">
        <span>Huya直播源</span>
    </label>
    <label>
        <input type="radio" name="page" id="page30">
        <span>YY直播源</span>
    </label>
    <label>
        <input type="radio" name="page" id="page31">
        <span>Twitch直播源</span>
    </label>
    <label>
        <input type="radio" name="page" id="page32">
        <span>Douyin直播源</span>
    </label>
    <label>
        <input type="radio" name="page" id="page33">
        <span>alist直播源-改</span>
    </label>
</div>
<div id="choice">
    <div id="page1" style="display: block;">
        <h1>直播源订阅:从网络下载直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认24小时自动执行生成操作,同时触发有效直播源在后台缓慢检测</h3>
            <h3>M3U超融合直播源订阅地址:docker主机地址:端口/url/allM3u.m3u</h3>
            <h3 class="urllink">全部直播源-无加密: http://192.168.5.1:22771/secret/allM3u.m3u</h3>
            <h3 class="urllink">全部直播源-无加密-txt: http://192.168.5.1:22771/secret/allM3u.txt</h3>
            <h3 class="urllink">全部直播源-加密: http://192.168.5.1:22771/url/allM3uSecret.txt</h3>
            <h3 class="urllink">有效直播源-无加密: http://192.168.5.1:22771/secret/aliveM3u.m3u</h3>
            <h3 class="urllink">电视盒子专用-华语电视台-有效直播源-无加密:
                http://192.168.5.1:22771/secret/healthM3u.m3u</h3>
            <h3 class="urllink">adguardhome放行直播源域名-无加密:
                http://192.168.5.1:22771/secret/tvDomainForAdguardhome.txt</h3>
            <h3 class="urllink">adguardhome放行直播源域名-加密:
                http://192.168.5.1:22771/url/tvDomainForAdguardhomeSecret.txt</h3>
            <h3>上传文件导入合并M3U超融合备份</h3>
        </div>
        <div style="float: right;width: 30%">
            <h2>txt转m3u直播源文件+格式规范</h2>
            <form enctype="multipart/form-data" method="post">
                <input id="upload-m3u" type="file" name="file" style="float: left;width: 80%">
                <br>
                <input id="sub-m3u" type="submit" value="上传你的m3u文件" style="float: left">
            </form>
            <br>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row" class="addNewSubscriber" style="width:100%">新增网络直播源订阅</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute()" style="width: 100%">生成M3U超融合直播源订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn" class="button download-json-btn" style="width: 100%">导出M3U订阅备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput6" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:M3U网络直播源订阅地址+加密订阅源的密码(没有加密就不填写)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page2" style="display: none;">
        <h1>直播源粘贴板:永久保存直播源到本地</h1>
        <h3>点击超融合链接，则会合并这里的直播源到全部直播源</h3>
        <h3>这部分的直播源只能通过手动删除</h3>
        <h3>没有在功能开关开启有效直播源和白名单直播源则无法使用该功能</h3>
        <h3>上传m3u文件自动/复制直播源到文本框手动合并直播源</h3>
        <input type="file" id="upload-m3u-btn" style="width: 100%"></input>
        <textarea id="m3uarea" rows="10" style="width: 100%;background-color: #758a99;color: aliceblue"></textarea>
        <br>
        <button id="savem3uareas" style="width: 100%" class="button" type="button" onclick="savem3uarea()">
            合并文本框直播源
        </button>
        <button id="download-m3u-btn" class="button" style="width: 100%">导出全部本地直播源</button>
        <button id="remove-m3u-btn" onclick="removem3u()" class="button removeallSubscriber">
            删除全部本地直播源
        </button>
        <div style="display: flex;width: 100%;">
            <div class="notice" style="display: flex;width: 80%;">直播源地址+频道备注
            </div>
            <div class="notice" style="display: flex;width: 20%;">操作</div>
        </div>
        <table id="input-m3u-table" style="width:100%">
            <tbody style="width:100%">
            </tbody>
        </table>
    </div>
    <div id="page3" style="display: none;">
        <h1>密码记录本</h1>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn6" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row6" class="addNewSubscriber" style="width:100%">新增密码</button>
            </div>
            <div>
                <button id="download-json-btn6" class="button download-json-btn" style="width: 100%">导出密码备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks6" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks6')">删除全部密码
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:密码来源+密码内容
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table6" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page4" style="display: none;">
        <h1>批量生成随机密码</h1>
        <form style="float: right">
            <label for="password-length">密码长度（必填）：</label>
            <input type="number" id="password-length" name="password-length" value="10" required min="1">
            <br>
            <label for="num-of-passwords">生成个数（默认10个）：</label>
            <input type="number" id="num-of-passwords" name="num-of-passwords" value="10" min="1">
            <br>
            <label>字符集：</label>
            <input type="checkbox" id="numbers" name="numbers" value="numbers" checked>
            <label for="numbers">0-9</label>
            <input type="checkbox" id="upper-case" name="upper-case" value="upper-case" checked>
            <label for="upper-case">A-Z</label>
            <input type="checkbox" id="lower-case" name="lower-case" value="lower-case" checked>
            <label for="lower-case">a-z</label>
            <input type="checkbox" id="special-chars" name="special-chars" value="special-chars" checked>
            <label for="special-chars">特殊符号</label>
            <br>
            <button id="generatepass" type="button" onclick="generatePasswords()">生成</button>
        </form>
        <br>
        <textarea id="password-list" rows="10" readonly
                  style="width: 100%;background-color: #758a99;color: aliceblue"></textarea>
        <br>
        <h1>base64加密</h1>
        <div>
            <textarea id="input" rows="5" cols="50"></textarea><br/>
            <button onclick="encode()">Encode</button>
            <button onclick="decode()">Decode</button>
            <br/>
            <textarea id="output" rows="5" cols="50"></textarea>
        </div>
        <div class="m3u-upload-sp">
            <h2>单个直播源文件数据(tvg_name)提取和分组(group-title)重命名,可以用来喂养m3u白名单和分组语言库</h2>
            <h2>比如m3u文件里直播源确定都是央视，那么设置分组名字为央视，里面直播源的名字全部归类为央视</h2>
            <h2>你可以把导出的group.json文件导入m3u白名单补充这个分组的词库</h2>
            <form enctype="multipart/form-data" method="post">
                <input class="submit-m3u-file" id="upload-m3u-data" type="file" name="file" style="float: left;width: 60%">
                <input class="submit-m3u-group" id="upload-m3u-group" type="text"  style="float: left;width: 15%;margin-left: 30px" placeholder="新分组名字">
                <input class="submit-m3u-group-sub"  type="submit" value="点击上传">
            </form>
            <br>
        </div>
        <div class="m3u-upload-sp">
            <h2>单个直播源文件数据提取和分组重命名,可以用来喂养m3u白名单和分组语言库</h2>
            <h2> 比如txt文件里直播源确定都是央视，那么设置分组名字为央视，里面直播源的名字全部归类为央视</h2>
            <h2>你可以把导出的group.json文件导入m3u白名单补充这个分组的词库</h2>
            <form enctype="multipart/form-data" method="post">
                <input class="submit-m3u-file" id="upload-m3u-data-txt" type="file" name="file" style="float: left;width: 60%">
                <input class="submit-m3u-group" id="upload-m3u-group-txt" type="text" style="float: left;width: 15%;margin-left: 30px"
                       placeholder="新分组名字">
                <input class="submit-m3u-group-sub"  type="submit" value="点击上传">
            </form>
            <br>
        </div>
        <div class="m3u-upload-sp">
            <h2>m3u文件转txt文件</h2>
            <form enctype="multipart/form-data" method="post">
                <input class="submit-m3u-file" id="upload-m3u-to-txt" type="file" name="file"
                       style="float: left;width: 60%">
                <input class="submit-m3u-group-sub" type="submit" value="点击上传">
            </form>
            <br>
        </div>
    </div>
    <div id="page5" style="display: none;">
        <h1>域名白名单订阅:从网络下载白名单</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认24小时自动执行生成操作</h3>
            <h3>超融合白名单订阅地址:参考M3U格式</h3>
            <h3 class="urllink">dnsmasq-无加密:http://192.168.5.1:22771/secret/whiteListDnsmasq.conf</h3>
            <h3 class="urllink">dnsmasq-加密:http://192.168.5.1:22771/url/whiteListDnsmasqSecret.txt</h3>
            <h3 class="urllink">whitelist-无加密:http://192.168.5.1:22771/secret/whiteListDomian.txt</h3>
            <h3 class="urllink">whitelist-加密:http://192.168.5.1:22771/url/whiteListDomianSecret.txt</h3>
            <h3 class="urllink">
                whitelist-openclash第三方直连规则-无加密:http://192.168.5.1:22771/secret/whitelistDirectRule.txt</h3>
            <h3>上传文件导入合并白名单订阅</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn2" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row2" class="addNewSubscriber" style="width:100%">新增白名单域名订阅</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute2()" style="width: 100%">生成白名单超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn2" class="button download-json-btn" style="width: 100%">
                    导出白名单订阅备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput7" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks2" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks2')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:白名单订阅地址+加密订阅源的密码(没有加密就不填写)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table2" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page6" style="display: none;">
        <h1>域名黑名单订阅:从网络下载黑名单</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认24小时自动执行生成操作</h3>
            <h3>超融合Adguardhome黑名单订阅地址:</h3>
            <h3 class="urllink">黑名单-OP-无加密:http://192.168.5.1:22771/secret/openclashFallbackFilterDomain.conf</h3>
            <h3 class="urllink">黑名单-OP-加密:http://192.168.5.1:22771/url/openclashFallbackFilterDomainSecret.txt</h3>
            <h3 class="urllink">黑名单-无加密:http://192.168.5.1:22771/secret/blackListDomain.txt</h3>
            <h3 class="urllink">黑名单-加密:http://192.168.5.1:22771/url/blackListDomainSecret.txt</h3>
            <h3 class="urllink">黑名单-openclash代理规则:http://192.168.5.1:22771/secret/blacklistProxyRule.txt</h3>
            <h3>上传文件导入合并黑名单订阅</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn3" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row3" class="addNewSubscriber" style="width:100%">新增黑名单域名订阅</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute3()" style="width: 100%">生成黑名单超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn3" class="button download-json-btn" style="width: 100%">
                    导出黑名单订阅备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput8" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks3" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks3')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:黑名单订阅地址+加密订阅源的密码(没有加密就不填写)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table3" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page7" style="display: none;">
        <h1>ipv4订阅:从网络下载ipv4</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认24小时自动执行生成操作</h3>
            <h3>超融合ipv4订阅地址:参考m3u格式</h3>
            <h3 class="urllink">ipv4-无加密:http://192.168.5.1:22771/secret/ipv4.txt</h3>
            <h3 class="urllink">ipv4-加密:http://192.168.5.1:22771/url/ipv4Secret.txt</h3>
            <h3>上传文件导入合并ipv4订阅</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn4" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row4" class="addNewSubscriber" style="width:100%">新增ipv4订阅</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute4()" style="width: 100%">生成ipv4超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn4" class="button download-json-btn" style="width: 100%">导出ipv4订阅备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput9" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks4" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks4')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:ipv4订阅地址+加密订阅源的密码(没有加密就不填写)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table4" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page8" style="display: none;">
        <h1>ipv6订阅:从网络下载ipv6</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认24小时自动执行生成操作</h3>
            <h3>超融合ipv6订阅地址:参考m3u格式</h3>
            <h3 class="urllink">IPV6-无加密:http://192.168.5.1:22771/secret/ipv6.txt</h3>
            <h3 class="urllink">IPV6-加密:http://192.168.5.1:22771/url/ipv6Secret.txt</h3>
            <h3>上传文件导入合并ipv6订阅</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn5" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row5" class="addNewSubscriber" style="width:100%">新增ipv6订阅</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute5()" style="width: 100%">生成ipv6超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn5" class="button download-json-btn" style="width: 100%">导出ipv6订阅备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput10" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks5" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks5')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:ipv6订阅地址+加密订阅源的密码(没有加密就不填写)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table5" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page9" style="display: none;">
        <h1>文本行去重复</h1>
        <button id="simply" style="float: right;width: 100%" onclick="removeDuplicates()">去重复</button>
        <div style="width:100%;display:flex; justify-content:space-between;">
            <div style="width: 50%">
                <p>在左边输入要去重复的文本，每行一个条目。</p>
                <textarea id="input2" rows="30" cols="50"></textarea>
            </div>
            <div style="width: 50%">
                <p>去重复结果如下：</p>
                <textarea id="output2" rows="30" cols="50" readonly></textarea>
                <br>
            </div>
        </div>
    </div>
    <div id="page10" style="display: none;width: 100%">
        <h1>节点订阅:从网络下载节点</h1>
        <div style="width: 100%">
            <button id="button-1" class="buttonChooseProxies">Clash新参数</button>
            <button id="button-2" class="buttonChooseProxies">ClashR新参数</button>
            <button id="button-3" class="buttonChooseProxies">Clash</button>
            <button id="button-4" class="buttonChooseProxies">Surge3</button>
            <button id="button-5" class="buttonChooseProxies">Surge4</button>
            <button id="button-6" class="buttonChooseProxies">Quantumult</button>
            <button id="button-7" class="buttonChooseProxies">Surfboard</button>
            <button id="button-8" class="buttonChooseProxies">Loon</button>
            <button id="button-9" class="buttonChooseProxies">SSAndroid</button>
            <button id="button-10" class="buttonChooseProxies">V2Ray</button>
            <button id="button-11" class="buttonChooseProxies">ss</button>
            <button id="button-12" class="buttonChooseProxies">ssr</button>
            <button id="button-13" class="buttonChooseProxies">ssd</button>
            <button id="button-14" class="buttonChooseProxies">ClashR</button>
            <button id="button-15" class="buttonChooseProxies">Surge2</button>
            <button id="button-16" class="buttonChooseProxies">QuantumultX</button>
        </div>
        <div style="float: left;width: 100%;display: flex;">
            <div style="float: left;width: 50%">
                <h3>后台默认24小时自动执行生成操作</h3>
                <h3>超融合节点订阅地址:参考m3u格式</h3>
                <h3>当出现网络问题但是可以下载远程加密订阅文件,直接取第一个加密订阅文件作为代理文件</h3>
                <h3 class="urllink">无加密代理:http://192.168.5.1:22771/secret/proxyConfig.yaml</h3>
                <h3 class="urllink">加密代理:http://192.168.5.1:22771/url/proxyConfigSecret.txt</h3>
                <h3>上传文件导入合并节点订阅</h3>
            </div>
            <div style="width: 100%;display: flex;flex-direction: column;height: 100%">
                <div class="dropdown" style="height: 30%">
                    <button id="proxy-model-switch" style="float: left;width: 90%">选择服务器配置</button>
                    <ul class="dropdown-content"></ul>
                </div>
                <div class="dropdown2" style="height: 30%">
                    <button id="proxy-model-switch2" style="float: left;width: 90%">选择远程配置</button>
                    <ul class="dropdown-content2"></ul>
                </div>
            </div>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn8" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row8" class="addNewSubscriber" style="width:100%">新增节点订阅</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute6()" style="width: 100%">生成节点超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn8" class="button download-json-btn" style="width: 100%">导出节点订阅备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput11" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks8" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks8')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:节点订阅地址+加密订阅源的密码
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table8" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page11" style="display: none;">
        <h1>节点订阅:远程配置订阅</h1>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并远程配置订阅</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn9" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row9" class="addNewSubscriber" style="width:100%">新增远程配置订阅</button>
            </div>
            <div>
                <button id="download-json-btn9" class="button download-json-btn" style="width: 100%">导出远程配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput12" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks9" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks9')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:远程订阅地址+备注
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table9" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page12" style="display: none;">
        <h1>节点订阅:后端地址</h1>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并后端地址</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn10" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row10" class="addNewSubscriber" style="width:100%">新增后端地址</button>
            </div>
            <div>
                <button id="download-json-btn10" class="button download-json-btn" style="width: 100%">
                    导出后端地址配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput13" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks10" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks10')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:后端地址+备注
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table10" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page13" style="display: none;">
        <h1>DNS分流器,监听22770端口</h1>
        <h3>修改了下面参数需要重启容器使其配置生效</h3>
        <div style="float: left;width: 70%">
            <h3>设置分流并发线程,分流服务器,端口,超时</h3>
        </div>
        <div style="display: flex;width: 100%;">
            DNS分流并发查询数(上限1000)
        </div>
        <div style="width:100%">
            <input type="text" id="queryThreadNum" class="stubboninput"/>
            <button id="queryThreadNumButton" onclick="saveQueryThreadNum()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            通信超时时间(单位:秒)
        </div>
        <div style="width:100%">
            <input type="text" id="timeout" class="stubboninput"/>
            <button id="timeoutButton" onclick="saveTimeout()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            DNS分流单个查询并发检测黑白名单数据线程数(上限1000)
        </div>
        <div style="width:100%">
            <input type="text" id="threads" class="stubboninput"/>
            <button id="threadsButton" onclick="saveData()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            国内DNS服务器地址
        </div>
        <div style="width:100%">
            <input type="text" id="chinaDnsServer" class="stubboninput"/>
            <button id="chinaDnsServerBtn" onclick="saveChinaDnsServer()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            国内DNS服务器端口
        </div>
        <div style="width:100%">
            <input type="text" id="chinaDnsPort" class="stubboninput"/>
            <button id="chinaDnsPortBtn" onclick="saveChinaDnsPort()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            国外DNS服务器地址
        </div>
        <div style="width:100%">
            <input type="text" id="extraDnsServer" class="stubboninput"/>
            <button id="extraDnsServerBtn" onclick="saveExtraDnsServer()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            国外DNS服务器端口
        </div>
        <div style="width:100%">
            <input type="text" id="extraDnsPort" class="stubboninput"/>
            <button id="extraDnsPortBtn" onclick="saveExtraDnsPort()" class="stubbonsave">保存</button>
        </div>
        <div style="display: flex;width: 100%;">
            假设这部分顶级域名全部走国内DNS,使用,分隔
        </div>
        <div style="width:100%">
            <input type="text" id="chinaTopDomain" class="stubboninput" placeholder="cn,中国"/>
            <button onclick="changeFileName('chinaTopDomain', 'chinaTopDomain', chinaTopDomain)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            假设这部分顶级域名全部走国外DNS,使用,分隔
        </div>
        <div style="width:100%">
            <input type="text" id="foreignTopDomain" class="stubboninput" placeholder="xyz,club,online,site,top,win"/>
            <button onclick="changeFileName('foreignTopDomain', 'foreignTopDomain', foreignTopDomain)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            dns查询模式(0-并发查询;1-顺序查询)
        </div>
        <div style="width:100%">
            <input type="text" id="dnsMode" class="stubboninput" placeholder="0"/>
            <button onclick="changeFileName('dnsMode', 'dnsMode', dnsMode)"
                    class="stubbonsave">修改
            </button>
        </div>
    </div>
    <div id="page14" style="display: none;">
        <h1>订阅密码锁</h1>
        <div style="float: left;width: 70%">
            <h3>设置私有订阅的密码</h3>
            <h3>可以通过密码订阅别人的私有订阅</h3>
            <h3>上传文件导入个人配置</h3>
        </div>
        <div>
            <input type="file" id="upload-json-btn20" class="uploadjsonbtn" style="width: 100%"></input>
        </div>
        <div>
            <button id="download-json-btn20" class="button download-json-btn" style="width: 100%">导出个人配置备份
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            直播源订阅
        </div>
        <div style="width:100%">
            <input type="text" id="threads2" class="stubboninput"/>
            <button onclick="changePassword('m3u','threads2',threadNum2)" class="stubbonsave">随机</button>
            <button onclick="changePasswordByHand('m3u','threads2',threadNum2)" class="stubbonsave">手动修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            域名白名单订阅
        </div>
        <div style="width:100%">
            <input type="text" id="chinaDnsServer2" class="stubboninput"/>
            <button onclick="changePassword('whitelist','chinaDnsServer2',chinaDnsServer2)" class="stubbonsave">随机
            </button>
            <button onclick="changePasswordByHand('whitelist','chinaDnsServer2',chinaDnsServer2)" class="stubbonsave">
                手动修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名黑名单订阅
        </div>
        <div style="width:100%">
            <input type="text" id="chinaDnsPort2" class="stubboninput"/>
            <button onclick="changePassword('blacklist','chinaDnsPort2',chinaDnsPort2)" class="stubbonsave">随机
            </button>
            <button onclick="changePasswordByHand('blacklist','chinaDnsPort2',chinaDnsPort2)" class="stubbonsave">
                手动修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            ipv4订阅
        </div>
        <div style="width:100%">
            <input type="text" id="extraDnsServer2" class="stubboninput"/>
            <button onclick="changePassword('ipv4','extraDnsServer2',extraDnsServer2)" class="stubbonsave">随机</button>
            <button onclick="changePasswordByHand('ipv4','extraDnsServer2',extraDnsServer2)" class="stubbonsave">
                手动修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            ipv6订阅
        </div>
        <div style="width:100%">
            <input type="text" id="extraDnsPort2" class="stubboninput"/>
            <button onclick="changePassword('ipv6','extraDnsPort2',extraDnsPort2)" class="stubbonsave">随机</button>
            <button onclick="changePasswordByHand('ipv6','extraDnsPort2',extraDnsPort2)" class="stubbonsave">手动修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            节点订阅
        </div>
        <div style="width:100%">
            <input type="text" id="extraDnsPort3" class="stubboninput"/>
            <button onclick="changePassword('proxy','extraDnsPort3',extraDnsPort3)" class="stubbonsave">随机</button>
            <button onclick="changePasswordByHand('proxy','extraDnsPort3',extraDnsPort3)" class="stubbonsave">手动修改
            </button>
        </div>
        <br>
        <h1>历史加密密码记录</h1>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并历史加密密码记录</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn14" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="download-json-btn14" class="button download-json-btn" style="width: 100%">
                    导出历史订阅密码备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput2" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks14" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks14')">删除全部历史订阅密码
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅密码+订阅类型
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table14" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page15" style="display: none;">
        <h1>gitee同步账号</h1>
        <div style="float: left;width: 70%">
            <h3>设置gitee账号、仓库、路径</h3>
            <h3>同步上传加密订阅超融合文件</h3>
            <h3>上传文件导入个人配置</h3>
        </div>
        <div>
            <input type="file" id="upload-json-btn21" class="uploadjsonbtn" style="width: 100%"></input>
        </div>
        <div>
            <button id="download-json-btn21" class="button download-json-btn" style="width: 100%">导出个人配置备份
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            gitee用户名:username
        </div>
        <div style="width:100%">
            <input type="text" id="giteeUsername" class="stubboninput" placeholder="ppap"/>
            <button onclick="changeSyncData('username', 'bbs', 'giteeUsername', giteeUsername)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            gitee仓库名:repo_name
        </div>
        <div style="width:100%">
            <input type="text" id="giteeRePoname" class="stubboninput" placeholder="test"/>
            <button onclick="changeSyncData('reponame', 'bbs', 'giteeRePoname', giteeRePoname)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            gitee路径:path
        </div>
        <div style="width:100%">
            <input type="text" id="giteePath" class="stubboninput" placeholder="/"/>
            <button onclick="changeSyncData('path', 'bbs', 'giteePath', giteePath)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            gitee访问令牌:access_token
        </div>
        <div style="width:100%">
            <input type="text" id="giteeAcessToken" class="stubboninput" placeholder="dsfdgshgrhergwrgsdeg"/>
            <button onclick="changeSyncData('accesstoken', 'bbs', 'giteeAcessToken', giteeAcessToken)"
                    class="stubbonsave">修改
            </button>
        </div>

        <h1>github同步账号</h1>
        <div style="float: left;width: 70%">
            <h3>设置github账号、仓库、路径</h3>
            <h3>同步上传加密订阅超融合文件</h3>
            <h3>上传文件导入个人配置</h3>
        </div>
        <div>
            <input type="file" id="upload-json-btn22" class="uploadjsonbtn" style="width: 100%"></input>
        </div>
        <div>
            <button id="download-json-btn22" class="button download-json-btn" style="width: 100%">导出个人配置备份
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            github用户名:username
        </div>
        <div style="width:100%">
            <input type="text" id="githubUsername" class="stubboninput" placeholder="ppap"/>
            <button onclick="changeSyncData('username', 'pps', 'githubUsername', githubUsername)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            github仓库名:repo_name
        </div>
        <div style="width:100%">
            <input type="text" id="githubRePoname" class="stubboninput" placeholder="test"/>
            <button onclick="changeSyncData('reponame', 'pps', 'githubRePoname', githubRePoname)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            github路径:path
        </div>
        <div style="width:100%">
            <input type="text" id="githubPath" class="stubboninput" placeholder="/"/>
            <button onclick="changeSyncData('path', 'pps', 'githubPath', githubPath)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            github访问令牌:access_token
        </div>
        <div style="width:100%">
            <input type="text" id="githubAcessToken" class="stubboninput" placeholder="rewretwertrt34twr"/>
            <button onclick="changeSyncData('accesstoken', 'pps', 'githubAcessToken', githubAcessToken)"
                    class="stubbonsave">修改
            </button>
        </div>

        <h1>webdav同步账号</h1>
        <div style="float: left;width: 70%">
            <h3>设置webdav账号、仓库、路径</h3>
            <h3>同步上传加密订阅超融合文件</h3>
            <h3>上传文件导入个人配置</h3>
        </div>
        <div>
            <input type="file" id="upload-json-btn23" class="uploadjsonbtn" style="width: 100%"></input>
        </div>
        <div>
            <button id="download-json-btn23" class="button download-json-btn" style="width: 100%">导出个人配置备份
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            webdav用户名:username
        </div>
        <div style="width:100%">
            <input type="text" id="webdavUsername" class="stubboninput" placeholder="ppap"/>
            <button onclick="changeSyncData('username', 'lls', 'webdavUsername', webdavUsername)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            webdav密码:password
        </div>
        <div style="width:100%">
            <input type="text" id="webdavPassword" class="stubboninput" placeholder="123456"/>
            <button onclick="changeSyncData('password', 'lls', 'webdavPassword', webdavPassword)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            webdav路径:path
        </div>
        <div style="width:100%">
            <input type="text" id="webdavPath" class="stubboninput" placeholder="/dav/"/>
            <button onclick="changeSyncData('path', 'lls', 'webdavPath', webdavPath)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            webdav协议:agreement（http/https）
        </div>
        <div style="width:100%">
            <input type="text" id="webdavAgreement" class="stubboninput" placeholder="http"/>
            <button onclick="changeSyncData('agreement', 'lls', 'webdavAgreement', webdavAgreement)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            webdav地址:ip地址或者域名(和协议对应起来,ip一般是http,域名一般是https)
        </div>
        <div style="width:100%">
            <input type="text" id="webdavIp" class="stubboninput" placeholder="192.168.5.1"/>
            <button onclick="changeSyncData('ip', 'lls', 'webdavIp', webdavIp)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            webdav端口:port (比如5244/80/8080....)
        </div>
        <div style="width:100%">
            <input type="text" id="webdavPort" class="stubboninput" placeholder="5244"/>
            <button onclick="changeSyncData('port', 'lls', 'webdavPort', webdavPort)" class="stubbonsave">修改</button>
        </div>
    </div>
    <div id="page16" style="display: none;">
        <h1>M3U白名单</h1>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并M3U白名单</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn11" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row11" class="addNewSubscriber" style="width:100%">新增关键字</button>
            </div>
            <div>
                <button id="download-json-btn11" class="button download-json-btn" style="width: 100%">
                    导出关键字配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput3" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks11" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks11')">删除全部关键字
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">关键字:过滤生成有效大陆直播源的判断依据;备注:频道分组
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table11" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page17" style="display: none;">
        <h1>系统配置</h1>
        <div style="float: left;width: 70%">
            <h3>设置主机ip，动态改变下载链接,ip如果不对可以自己调整</h3>
        </div>
        <div style="width:100%">
            <input type="text" id="iptext" class="stubboninput"/>
            <button id="changeip" onclick="changeIP()" class="stubbonsave">修改</button>
        </div>

        <div style="display: flex;width: 100%;">
            斗鱼、哔哩哔哩、虎牙、YY、Youtube直播源超时最小值(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="minTimeout" class="stubboninput" placeholder="minTimeout"/>
            <button onclick="changeFileName('minTimeout', 'minTimeout', minTimeout)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            斗鱼、哔哩哔哩、虎牙、YY、Youtube直播源超时最大值(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="maxTimeout" class="stubboninput" placeholder="maxTimeout"/>
            <button onclick="changeFileName('maxTimeout', 'maxTimeout', maxTimeout)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            系统用户名
        </div>
        <div style="width:100%">
            <input type="text" id="usernameSys" class="stubboninput" placeholder="admin"/>
            <button onclick="changeFileName('usernameSys', 'usernameSys', usernameSys)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            系统密码
        </div>
        <div style="width:100%">
            <input type="text" id="passwordSys" class="stubboninput" placeholder="password"/>
            <button onclick="changeFileName('passwordSys', 'passwordSys', passwordSys)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            通用直播源定时器执行周期(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="normalM3uClock" class="stubboninput" placeholder="7200"/>
            <button onclick="changeFileName('normalM3uClock', 'normalM3uClock', normalM3uClock)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            通用订阅下载定时器执行周期(域名黑/白名单、ipv4/6、下载加密/解密)(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="normalSubscriberClock" class="stubboninput" placeholder="10800"/>
            <button onclick="changeFileName('normalSubscriberClock', 'normalSubscriberClock', normalSubscriberClock)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            节点订阅文件下载周期(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="proxySubscriberClock" class="stubboninput" placeholder="3600"/>
            <button onclick="changeFileName('proxySubscriberClock', 'proxySubscriberClock', proxySubscriberClock)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            youtube/bilibili/huya/yy/twitch直播源刷新周期(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="spM3uClock" class="stubboninput" placeholder="3600"/>
            <button onclick="changeFileName('spM3uClock', 'spM3uClock', spM3uClock)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            自动简易dns订阅文件生成周期(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="autoDnsSwitchClock" class="stubboninput" placeholder="600"/>
            <button onclick="changeFileName('autoDnsSwitchClock', 'autoDnsSwitchClock', autoDnsSwitchClock)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            同步账号检查上传数据线程周期(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="syncClock" class="stubboninput" placeholder="10"/>
            <button onclick="changeFileName('syncClock', 'syncClock', syncClock)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            最大失败尝试恢复推流alist直播源时长(秒)
        </div>
        <div style="width:100%">
            <input type="text" id="reliveAlistTsTime" class="stubboninput" placeholder="600"/>
            <button onclick="changeFileName('reliveAlistTsTime', 'reliveAlistTsTime', reliveAlistTsTime)"
                    class="stubbonsave">修改
            </button>
        </div>
    </div>
    <div id="page18" style="display: none;">
        <h1>功能开关</h1>
        <div style="padding-right: 60px">
            <button onclick="serverMode()" class="stubbonsave">服务器模式</button>
            <button onclick="clientMode()" class="stubbonsave">客户机模式</button>
            <br>
            <br>
            <br>
            <br>
        </div>
        <div class="grid-container">
            <div class="grid-item">
                <button id="switch" class="switchfunctionbutton" onclick="toggleSwitch('switch')">已关闭</button>
                <input class="toggletext" type="text" value="生成有效M3U">
            </div>
            <div class="grid-item">
                <button id="switch2" class="switchfunctionbutton" onclick="toggleSwitch('switch2')">已关闭</button>
                <input class="toggletext" type="text" value="M3U加密">
            </div>
            <div class="grid-item">
                <button id="switch3" class="switchfunctionbutton" onclick="toggleSwitch('switch3')">已关闭</button>
                <input class="toggletext" type="text" value="全部M3U加密上传">
            </div>
            <div class="grid-item">
                <button id="switch4" class="switchfunctionbutton" onclick="toggleSwitch('switch4')">已关闭</button>
                <input class="toggletext" type="text" value="生成全部M3U">
            </div>
            <div class="grid-item">
                <button id="switch5" class="switchfunctionbutton" onclick="toggleSwitch('switch5')">已关闭</button>
                <input class="toggletext" type="text" value="生成白名单M3U">
            </div>
            <div class="grid-item">
                <button id="switch6" class="switchfunctionbutton" onclick="toggleSwitch('switch6')">已关闭</button>
                <input class="toggletext" type="text" value="M3U域名-无加密">
            </div>
            <div class="grid-item">
                <button id="switch7" class="switchfunctionbutton" onclick="toggleSwitch('switch7')">已关闭</button>
                <input class="toggletext" type="text" value="m3u域名加密文件上传">
            </div>
            <div class="grid-item">
                <button id="switch8" class="switchfunctionbutton" onclick="toggleSwitch('switch8')">已关闭</button>
                <input class="toggletext" type="text" value="m3u域名加密文件生成">
            </div>
            <div class="grid-item">
                <button id="switch9" class="switchfunctionbutton" onclick="toggleSwitch('switch9')">已关闭</button>
                <input class="toggletext" type="text" value="域名白名单生成dnsmasq加密文件">
            </div>
            <div class="grid-item">
                <button id="switch10" class="switchfunctionbutton" onclick="toggleSwitch('switch10')">已关闭</button>
                <input class="toggletext" type="text" value="域名白名单加密dnsmasq文件上传">
            </div>
            <div class="grid-item">
                <button id="switch11" class="switchfunctionbutton" onclick="toggleSwitch('switch11')">已关闭</button>
                <input class="toggletext" type="text" value="whitelist-加密上传">
            </div>
            <div class="grid-item">
                <button id="switch12" class="switchfunctionbutton" onclick="toggleSwitch('switch12')">已关闭</button>
                <input class="toggletext" type="text" value="whitelist-加密">
            </div>
            <div class="grid-item">
                <button id="switch13" class="switchfunctionbutton" onclick="toggleSwitch('switch13')">已关闭</button>
                <input class="toggletext" type="text" value="域名黑名单-定时器">
            </div>
            <div class="grid-item">
                <button id="switch14" class="switchfunctionbutton" onclick="toggleSwitch('switch14')">已关闭</button>
                <input class="toggletext" type="text" value="域名黑名单OP-加密">
            </div>
            <div class="grid-item">
                <button id="switch15" class="switchfunctionbutton" onclick="toggleSwitch('switch15')">已关闭</button>
                <input class="toggletext" type="text" value="域名黑名单OP-加密-上传">
            </div>
            <div class="grid-item">
                <button id="switch16" class="switchfunctionbutton" onclick="toggleSwitch('switch16')">已关闭</button>
                <input class="toggletext" type="text" value="域名黑名单-加密">
            </div>
            <div class="grid-item">
                <button id="switch17" class="switchfunctionbutton" onclick="toggleSwitch('switch17')">已关闭</button>
                <input class="toggletext" type="text" value="域名黑名单-加密-上传">
            </div>
            <div class="grid-item">
                <button id="switch18" class="switchfunctionbutton" onclick="toggleSwitch('switch18')">已关闭</button>
                <input class="toggletext" type="text" value="ipv4-加密">
            </div>
            <div class="grid-item">
                <button id="switch19" class="switchfunctionbutton" onclick="toggleSwitch('switch19')">已关闭</button>
                <input class="toggletext" type="text" value="ipv4-加密-上传">
            </div>
            <div class="grid-item">
                <button id="switch20" class="switchfunctionbutton" onclick="toggleSwitch('switch20')">已关闭</button>
                <input class="toggletext" type="text" value="ipv6-加密">
            </div>
            <div class="grid-item">
                <button id="switch21" class="switchfunctionbutton" onclick="toggleSwitch('switch21')">已关闭</button>
                <input class="toggletext" type="text" value="ipv6-加密-上传">
            </div>
            <div class="grid-item">
                <button id="switch22" class="switchfunctionbutton" onclick="toggleSwitch('switch22')">已关闭</button>
                <input class="toggletext" type="text" value="节点订阅-加密">
            </div>
            <div class="grid-item">
                <button id="switch23" class="switchfunctionbutton" onclick="toggleSwitch('switch23')">已关闭</button>
                <input class="toggletext" type="text" value="节点订阅-加密-上传">
            </div>
            <div class="grid-item">
                <button id="switch24" class="switchfunctionbutton" onclick="toggleSwitch('switch24')">已关闭</button>
                <input class="toggletext" type="text" value="自动生成简易DNS黑白名单">
            </div>
            <div class="grid-item">
                <button id="switch25" class="switchfunctionbutton" onclick="toggleSwitch('switch25')">已关闭</button>
                <input class="toggletext" type="text" value="m3u-定时器">
            </div>
            <div class="grid-item">
                <button id="switch26" class="switchfunctionbutton" onclick="toggleSwitch('switch26')">已关闭</button>
                <input class="toggletext" type="text" value="域名白名单-定时器">
            </div>
            <div class="grid-item">
                <button id="switch27" class="switchfunctionbutton" onclick="toggleSwitch('switch27')">已关闭</button>
                <input class="toggletext" type="text" value="ipv4-定时器">
            </div>
            <div class="grid-item">
                <button id="switch28" class="switchfunctionbutton" onclick="toggleSwitch('switch28')">已关闭</button>
                <input class="toggletext" type="text" value="ipv6-定时器">
            </div>
            <div class="grid-item">
                <button id="switch30" class="switchfunctionbutton" onclick="toggleSwitch('switch30')">已关闭</button>
                <input class="toggletext" type="text" value="上传至Gitee">
            </div>
            <div class="grid-item">
                <button id="switch31" class="switchfunctionbutton" onclick="toggleSwitch('switch31')">已关闭</button>
                <input class="toggletext" type="text" value="上传至Github">
            </div>
            <div class="grid-item">
                <button id="switch32" class="switchfunctionbutton" onclick="toggleSwitch('switch32')">已关闭</button>
                <input class="toggletext" type="text" value="上传至Webdav">
            </div>
            <div class="grid-item">
                <button id="switch33" class="switchfunctionbutton" onclick="toggleSwitch('switch33')">已关闭</button>
                <input class="toggletext" type="text" value="下载加密上传-定时器">
            </div>
            <div class="grid-item">
                <button id="switch34" class="switchfunctionbutton" onclick="toggleSwitch('switch34')">已关闭</button>
                <input class="toggletext" type="text" value="下载解密-定时器">
            </div>
            <div class="grid-item">
                <button id="switch35" class="switchfunctionbutton" onclick="toggleSwitch('switch35')">已关闭</button>
                <input class="toggletext" type="text" value="项目直播源刷新模式-定时器刷新">
            </div>
        </div>
    </div>
    <div id="page19" style="display: none;">
        <h1>简易DNS分流白名单</h1>
        <div style="float: left;width: 70%">
            <h3>填写个人日常使用的白名单域名一\二级域名，比如:bilibili.com，bilivideo.com</h3>
            <h3>这里的数据不建议特别多,根据个人网络冲浪习惯设置</h3>
            <h3>该规则优先于DNS白名单订阅的全部域名规则</h3>
            <h3>当这里出现外国域名就代表泄露翻墙的可能性已经成立,要尽可能避免,速度删除该域名,如果你是隐私狂魔的话</h3>
            <h3 style="color: crimson">默认自动开启自主生成白名单数据,如果不可靠可以在功能开关关闭该功能</h3>
            <h3>数据最终模板来源于白名单订阅里全部数据,如果那边的数据不可靠,这个功能是无效的</h3>
            <h3>每隔24小时自动清除数据</h3>
            <h3 class="urllink">个人白名单浏览记录-dnsmasq: http://192.168.5.1:22771/secret/simpleDnsmasq.conf</h3>
            <h3 class="urllink">个人白名单分流规则-openclash:
                http://192.168.5.1:22771/secret/simplewhitelistProxyRule.txt</h3>
            <h3>上传文件导入合并简易DNS分流白名单</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn12" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row12" class="addNewSubscriber" style="width:100%">新增关键字</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute8()" style="width: 100%">
                    刷新本栏的两个链接数据
                </button>
            </div>
            <div>
                <button id="download-json-btn12" class="button download-json-btn" style="width: 100%">导出配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput4" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks12" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks12')">删除全部域名
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">简易白名单域名:一级域名
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table12" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page20" style="display: none;">
        <h1>简易DNS分流黑名单</h1>
        <div style="float: left;width: 70%">
            <h3>填写个人日常使用的黑名单域名一\二级域名，比如:youtube.com，twitter.com,m.youtube.com</h3>
            <h3>这里的数据不建议特别多,根据个人网络冲浪习惯设置</h3>
            <h3>该规则优先于DNS黑名单订阅的全部域名规则</h3>
            <h3>当这里出现大陆域名不一定泄露,如果是openclash作为上游还有保底的余地</h3>
            <h3>根据互相逃离主义,把大陆域名泄露给外国dns服务商可以不算泄露,毕竟FBI没办法来大陆抓你</h3>
            <h3>当然如果你的外网dns供应商使用了大陆系dns供应商的海外版本,那祝你好运</h3>
            <h3 style="color: crimson">默认自动开启自主生成黑名单数据,如果不可靠可以在功能开关关闭该功能</h3>
            <h3>数据最终模板来源于黑名单订阅里全部数据,如果那边的数据不可靠,这个功能是无效的</h3>
            <h3>每隔24小时自动清除数据</h3>
            <h3 class="urllink">个人黑名单浏览记录-openclash:
                http://192.168.5.1:22771/secret/simpleOpenclashFallBackFilterDomain.txt</h3>
            <h3 class="urllink">个人黑名单分流规则-openclash:
                http://192.168.5.1:22771/secret/simpleblacklistProxyRule.txt</h3>
            <h3>上传文件导入合并简易DNS分流黑名单</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn13" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row13" class="addNewSubscriber" style="width:100%">新增关键字</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute7()" style="width: 100%">
                    刷新本栏的两个链接数据
                </button>
            </div>
            <div>
                <button id="download-json-btn13" class="button download-json-btn" style="width: 100%">导出配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput5" placeholder="搜索框" class="searchbox" style="width: 100%"></input>
            </div>
            <button id="removem3ulinks13" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks13')">删除全部域名
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">简易黑名单域名:一级域名
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table13" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page21" style="display: none;">
        <h1>打赏专栏</h1>
        <h3>作者:paperbluster</h3>
        <a href="https://t.me/+stAaKNYl3mtmN2Zl" target="_blank">https://t.me/+stAaKNYl3mtmN2Zl</a>
        <h3>项目地址</h3>
        <a href="https://github.com/paperbluster/m3u_subscriber" target="_blank">https://github.com/paperbluster/m3u_subscriber</a>
        <h3>各位路人朋友可以请我喝一杯咖啡吗^_^,您的支持将给予我更多动力迭代这个项目</h3>
        <h4>比特币(bitcoin)</h4>
        <li id="bitcoin"><img id="bitcoin-image" src="#" alt="Bitcoin"></li>
    </div>
    <div id="page22" style="display: none;">
        <h1>订阅文件重命名</h1>
        <div style="float: left;width: 70%">
            <h3>不要使用默认名称，尽可能勤快的换名字</h3>
            <h3>不可以命名文件格式</h3>
            <h3>上传文件导入个人配置</h3>
        </div>
        <div>
            <input type="file" id="upload-json-btn19" class="uploadjsonbtn" style="width: 100%"></input>
        </div>
        <div>
            <button id="download-json-btn19" class="button download-json-btn" style="width: 100%">导出个人配置备份
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            全部直播源-无加密:allM3u
        </div>
        <div style="width:100%">
            <input type="text" id="allM3u" class="stubboninput" placeholder="allM3u"/>
            <button onclick="changeFileName('allM3u', 'allM3u', allM3u)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            全部直播源-加密:allM3uSecret
        </div>
        <div style="width:100%">
            <input type="text" id="allM3uSecret" class="stubboninput" placeholder="allM3uSecret"/>
            <button onclick="changeFileName('allM3uSecret', 'allM3uSecret', allM3uSecret)" class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            有效直播源-无加密:aliveM3u
        </div>
        <div style="width:100%">
            <input type="text" id="aliveM3u" class="stubboninput" placeholder="aliveM3u"/>
            <button onclick="changeFileName('aliveM3u', 'aliveM3u', aliveM3u)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            电视盒子专用-华语电视台-有效直播源-无加密:healthM3u
        </div>
        <div style="width:100%">
            <input type="text" id="healthM3u" class="stubboninput" placeholder="healthM3u"/>
            <button onclick="changeFileName('healthM3u', 'healthM3u', healthM3u)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            adguardhome放行TV域名-无加密:tvDomainForAdguardhome
        </div>
        <div style="width:100%">
            <input type="text" id="tvDomainForAdguardhome" class="stubboninput" placeholder="tvDomainForAdguardhome"/>
            <button onclick="changeFileName('tvDomainForAdguardhome', 'tvDomainForAdguardhome', tvDomainForAdguardhome)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            adguardhome放行TV域名-加密:tvDomainForAdguardhomeSecret
        </div>
        <div style="width:100%">
            <input type="text" id="tvDomainForAdguardhomeSecret" class="stubboninput"
                   placeholder="tvDomainForAdguardhomeSecret"/>
            <button onclick="changeFileName('tvDomainForAdguardhomeSecret', 'tvDomainForAdguardhomeSecret', tvDomainForAdguardhomeSecret)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名白名单-dnsmasq-无加密:whiteListDnsmasq
        </div>
        <div style="width:100%">
            <input type="text" id="whiteListDnsmasq" class="stubboninput" placeholder="whiteListDnsmasq"/>
            <button onclick="changeFileName('whiteListDnsmasq', 'whiteListDnsmasq', whiteListDnsmasq)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名白名单-dnsmasq-加密:whiteListDnsmasqSecret
        </div>
        <div style="width:100%">
            <input type="text" id="whiteListDnsmasqSecret" class="stubboninput" placeholder="whiteListDnsmasqSecret"/>
            <button onclick="changeFileName('whiteListDnsmasqSecret', 'whiteListDnsmasqSecret', whiteListDnsmasqSecret)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名白名单-whitelist-无加密:whiteListDomian
        </div>
        <div style="width:100%">
            <input type="text" id="whiteListDomian" class="stubboninput" placeholder="whiteListDomian"/>
            <button onclick="changeFileName('whiteListDomian', 'whiteListDomian', whiteListDomian)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名白名单-whitelist-加密:whiteListDomianSecret
        </div>
        <div style="width:100%">
            <input type="text" id="whiteListDomianSecret" class="stubboninput" placeholder="whiteListDomianSecret"/>
            <button onclick="changeFileName('whiteListDomianSecret', 'whiteListDomianSecret', whiteListDomianSecret)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名白名单-openclash直连规则:whitelistDirectRule
        </div>
        <div style="width:100%">
            <input type="text" id="whitelistDirectRule" class="stubboninput" placeholder="whitelistDirectRule"/>
            <button onclick="changeFileName('whitelistDirectRule', 'whitelistDirectRule', whitelistDirectRule)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名黑名单-OP-无加密:openclashFallbackFilterDomain
        </div>
        <div style="width:100%">
            <input type="text" id="openclashFallbackFilterDomain" class="stubboninput"
                   placeholder="openclashFallbackFilterDomain"/>
            <button onclick="changeFileName('openclashFallbackFilterDomain', 'openclashFallbackFilterDomain', openclashFallbackFilterDomain)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名黑名单-OP-加密:openclashFallbackFilterDomainSecret
        </div>
        <div style="width:100%">
            <input type="text" id="openclashFallbackFilterDomainSecret" class="stubboninput"
                   placeholder="openclashFallbackFilterDomainSecret"/>
            <button onclick="changeFileName('openclashFallbackFilterDomainSecret', 'openclashFallbackFilterDomainSecret', openclashFallbackFilterDomainSecret)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名黑名单-无加密:blackListDomain
        </div>
        <div style="width:100%">
            <input type="text" id="blackListDomain" class="stubboninput" placeholder="blackListDomain"/>
            <button onclick="changeFileName('blackListDomain', 'blackListDomain', blackListDomain)" class="stubbonsave">
                修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名黑名单-加密:blackListDomainSecret
        </div>
        <div style="width:100%">
            <input type="text" id="blackListDomainSecret" class="stubboninput" placeholder="blackListDomainSecret"/>
            <button onclick="changeFileName('blackListDomainSecret', 'blackListDomainSecret', blackListDomainSecret)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            域名黑名单-openclash代理规则:blacklistProxyRule
        </div>
        <div style="width:100%">
            <input type="text" id="blacklistProxyRule" class="stubboninput" placeholder="blacklistProxyRule"/>
            <button onclick="changeFileName('blacklistProxyRule', 'blacklistProxyRule', blacklistProxyRule)"
                    class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            ipv4-无加密:ipv4
        </div>
        <div style="width:100%">
            <input type="text" id="ipv4" class="stubboninput" placeholder="ipv4"/>
            <button onclick="changeFileName('ipv4', 'ipv4', ipv4)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            ipv4-加密:ipv4Secret
        </div>
        <div style="width:100%">
            <input type="text" id="ipv4Secret" class="stubboninput" placeholder="ipv4Secret"/>
            <button onclick="changeFileName('ipv4Secret', 'ipv4Secret', ipv4Secret)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            ipv6-无加密:ipv6
        </div>
        <div style="width:100%">
            <input type="text" id="ipv6" class="stubboninput" placeholder="ipv6"/>
            <button onclick="changeFileName('ipv6', 'ipv6', ipv6)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            ipv6-加密:ipv6Secret
        </div>
        <div style="width:100%">
            <input type="text" id="ipv6Secret" class="stubboninput" placeholder="ipv6Secret"/>
            <button onclick="changeFileName('ipv6Secret', 'ipv6Secret', ipv6Secret)" class="stubbonsave">修改</button>
        </div>
        <div style="display: flex;width: 100%;">
            节点订阅-无加密:proxyConfig
        </div>
        <div style="width:100%">
            <input type="text" id="proxyConfig" class="stubboninput" placeholder="proxyConfig"/>
            <button onclick="changeFileName('proxyConfig', 'proxyConfig', proxyConfig)" class="stubbonsave">修改
            </button>
        </div>
        <div style="display: flex;width: 100%;">
            节点订阅-加密:proxyConfigSecret
        </div>
        <div style="width:100%">
            <input type="text" id="proxyConfigSecret" class="stubboninput" placeholder="proxyConfigSecret"/>
            <button onclick="changeFileName('proxyConfigSecret', 'proxyConfigSecret', proxyConfigSecret)"
                    class="stubbonsave">修改
            </button>
        </div>
    </div>

    <div id="page23" style="display: none;">
        <h1>M3U垃圾过滤</h1>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并M3U</h3>
            <h3>输入关键词彻底屏蔽你不想看的直播数据入库</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn15" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row15" class="addNewSubscriber" style="width:100%">新增关键字</button>
            </div>
            <div>
                <button id="download-json-btn15" class="button download-json-btn" style="width: 100%">
                    导出关键字配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput14" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks15" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks15')">删除全部关键字
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">关键字:直接屏蔽关键字对应直播源
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table15" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page24" style="display: none;">
        <h1>M3U白名单分组优先级</h1>
        <h3>优先级数字越小,分组规则越优先执行</h3>
        <h3>分组没有在这里设置优先度的情况默认最后处理</h3>
        <h3>分组规则越细致+合理的分组优先级,结果越符合预期,但是对应的计算量越大,量力而行</h3>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并M3U白名单配置</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn16" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row16" class="addNewSubscriber" style="width:100%">新增分组配置</button>
            </div>
            <div>
                <button id="download-json-btn16" class="button download-json-btn" style="width: 100%">导出分组配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput16" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks16" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks16')">删除全部关键字
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">分组:m3u白名单分组;备注:优先级数字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table16" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page25" style="display: none;">
        <h1>网络配置文件下载</h1>
        <div style="float: left;width: 70%">
            <h3>每隔24小时自动执行,默认关闭,可以在功能开关切换</h3>
            <h3>不建议滥用,只配置必要的配置文件链接即可</h3>
            <h3>上传文件导入合并网络配置文件下载配置</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn17" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row17" class="addNewSubscriber" style="width:100%">新增配置</button>
            </div>
            <div>
                <button id="download-json-btn17" class="button download-json-btn" style="width: 100%">导出配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput17" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <div>
                <button class="button stepflag" onclick="execute9()" style="width: 100%">
                    下载全部配置并且加密上传至同步账号
                </button>
            </div>
            <button id="removem3ulinks17" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks17')">删除全部
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">下载链接+加密密码+重命名名字(包含文件格式)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table17" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page26" style="display: none;">
        <h1>网络配置文件下载解密</h1>
        <h3>每隔24小时自动执行,默认关闭,可以在功能开关切换</h3>
        <h3>解密文件局域网访问路径格式举例子:http://192.168.5.1:22771/secret/11.txt</h3>
        <h3>内部访问:http://127.0.0.1:22771/secret/11.txt</h3>
        <div style="float: left;width: 70%">
            <h3>上传文件导入合并网络配置文件下载配置</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn18" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row18" class="addNewSubscriber" style="width:100%">新增配置</button>
            </div>
            <div>
                <button id="download-json-btn18" class="button download-json-btn" style="width: 100%">导出配置备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput18" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <div>
                <button class="button stepflag" onclick="execute10()" style="width: 100%">
                    下载全部配置并且解密还原
                </button>
            </div>
            <button id="removem3ulinks18" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks18')">删除全部
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">下载链接+加密密码+源文件名字(包含文件格式)
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table18" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>

    <div id="page27" style="display: none;">
        <h1>Youtube直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认1小时自动执行生成操作,需要在功能开关开启</h3>
            <h3>超融合油管订阅地址:参考m3u格式</h3>
            <h3 class="urllink">youtube-无加密:http://192.168.5.1:22771/secret/youtube.m3u</h3>
            <h3 class="urllink">youtube-无加密-txt:http://192.168.5.1:22771/secret/youtube.txt</h3>
            <h3>上传文件导入合并YouTube频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn24" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row24" class="addNewSubscriber" style="width:100%">新增YouTube直播频道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute24()" style="width: 100%">生成youtube超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn24" class="button download-json-btn" style="width: 100%">
                    导出youtube直播频道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput24" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks24" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks24')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:youtube直播ID+频道名字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table24" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>

    <div id="page28" style="display: none;">
        <h1>BiliBili直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认1小时自动执行生成操作,需要在功能开关开启</h3>
            <h3>超融合哔哩哔哩订阅地址:参考m3u格式</h3>
            <h3 class="urllink">bilibili-无加密:http://192.168.5.1:22771/secret/bilibili.m3u</h3>
            <h3 class="urllink">bilibili-无加密-txt:http://192.168.5.1:22771/secret/bilibili.txt</h3>
            <h3>上传文件导入合并Bilibili频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn25" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row25" class="addNewSubscriber" style="width:100%">新增BiliBili直播频道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute25()" style="width: 100%">生成bilibili超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn25" class="button download-json-btn" style="width: 100%">
                    导出bilibili直播频道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput25" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks25" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks25')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:bilibili直播ID+频道名字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table25" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>

    <div id="page29" style="display: none;">
        <h1>Huya直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认1小时自动执行生成操作,需要在功能开关开启</h3>
            <h3>超融合虎牙订阅地址:参考m3u格式</h3>
            <h3 class="urllink">huya-无加密:http://192.168.5.1:22771/secret/huya.m3u</h3>
            <h3 class="urllink">huya-无加密-txt:http://192.168.5.1:22771/secret/huya.txt</h3>
            <h3>上传文件导入合并Huya频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn26" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row26" class="addNewSubscriber" style="width:100%">新增Huya直播频道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute26()" style="width: 100%">生成huya超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn26" class="button download-json-btn" style="width: 100%">
                    导出huya直播频道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput26" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks26" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks26')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:huya直播ID+频道名字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table26" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>

    <div id="page30" style="display: none;">
        <h1>YY直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认1小时自动执行生成操作,需要在功能开关开启</h3>
            <h3>超融合YY订阅地址:参考m3u格式</h3>
            <h3 class="urllink">YY-无加密:http://192.168.5.1:22771/secret/YY.m3u</h3>
            <h3 class="urllink">YY-无加密-txt:http://192.168.5.1:22771/secret/YY.txt</h3>
            <h3>上传文件导入合并YY频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn27" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row27" class="addNewSubscriber" style="width:100%">新增YY直播频道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute27()" style="width: 100%">生成YY超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn27" class="button download-json-btn" style="width: 100%">
                    导出YY直播频道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput27" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks27" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks27')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:YY直播ID+频道名字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table27" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page31" style="display: none;">
        <h1>Twitch直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认1小时自动执行生成操作,需要在功能开关开启</h3>
            <h3>超融合Twitch订阅地址:参考m3u格式</h3>
            <h3 class="urllink">TWITCH-无加密:http://192.168.5.1:22771/secret/TWITCH.m3u</h3>
            <h3 class="urllink">TWITCH-无加密-txt:http://192.168.5.1:22771/secret/TWITCH.txt</h3>
            <h3>上传文件导入合并YY频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn28" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row28" class="addNewSubscriber" style="width:100%">新增TWITCH直播频道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute28()" style="width: 100%">生成TWITCH超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn28" class="button download-json-btn" style="width: 100%">
                    导出TWITCH直播频道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput28" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks28" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks28')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:TWITCH直播ID+频道名字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table28" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page32" style="display: none;">
        <h1>Douyin直播源</h1>
        <div style="float: left;width: 70%">
            <h3>后台默认1小时自动执行生成操作,需要在功能开关开启</h3>
            <h3>超融合Douyin订阅地址:参考m3u格式</h3>
            <h3 class="urllink">Douyin-无加密:http://192.168.5.1:22771/secret/Douyin.m3u</h3>
            <h3 class="urllink">Douyin-无加密-txt:http://192.168.5.1:22771/secret/Douyin.txt</h3>
            <h3>上传文件导入合并Douyin频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn29" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row29" class="addNewSubscriber" style="width:100%">新增Douyin直播频道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute29()" style="width: 100%">生成Douyin超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn29" class="button download-json-btn" style="width: 100%">
                    导出Douyin直播频道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput29" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks29" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks29')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:Douyin直播ID+频道名字
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table29" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
    <div id="page33" style="display: none;">
        <h1>alist直播源-静态</h1>
        <div style="float: left;width: 70%">
            <h3 style="color: crimson">该功能不适用普通alist资源,只针对加密直播源这一种情况使用</h3>
            <h3>超融合alist订阅地址:参考m3u格式</h3>
            <h3 class="urllink">alist-无加密:http://192.168.5.1:22771/secret/alist.m3u</h3>
            <h3 class="urllink">alist-无加密-txt:http://192.168.5.1:22771/secret/alist.txt</h3>
            <h3>上传文件导入合并alist频道</h3>
        </div>
        <div style="width:100%">
            <div>
                <input type="file" id="upload-json-btn30" class="uploadjsonbtn" style="width: 100%"></input>
            </div>
            <div>
                <button id="add-row30" class="addNewSubscriber" style="width:100%">新增alist直播视频通道</button>
            </div>
            <div>
                <button class="button stepflag" onclick="execute30()" style="width: 100%">生成aist超融合订阅
                </button>
            </div>
            <div>
                <button id="download-json-btn30" class="button download-json-btn" style="width: 100%">
                    导出alist直播通道备份
                </button>
            </div>
            <div style="width: 97%;">
                <input type="text" id="searchInput30" placeholder="搜索框" class="searchbox"
                       style="width: 100%"></input>
            </div>
            <button id="removem3ulinks30" class="button removeallSubscriber"
                    onclick="removelinksBase('/api/removem3ulinks30')">删除全部订阅
            </button>
            <div style="display: flex;width: 100%;">
                <div class="notice" style="display: flex;width: 80%;">订阅来源:alist直播通道父路径(测试40万个视频负载)+频道密码
                </div>
                <div class="notice" style="display: flex;width: 20%;">操作</div>
            </div>
            <table id="input-table30" style="width:100%">
                <tbody style="width:100%">
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const addRowButton = document.getElementById('add-row');
    const inputTable = document.getElementById('input-table');
    //const form = document.querySelector('form');
    const forms = document.querySelectorAll('form');
    const switchbox = document.getElementById("switchbox");
    const choice = document.getElementById("choice");
    const pages = choice.children;
    const m3ufileInput = document.getElementById('upload-m3u-btn');
    const m3uTable = document.getElementById('input-m3u-table');
    const tbody = m3uTable.querySelector('tbody');
    const batchSize = 50;
    let currentBatch = 0;
    let currentBatchData = [];

    const addRowButton2 = document.getElementById('add-row2');
    const inputTable2 = document.getElementById('input-table2');

    const addRowButton3 = document.getElementById('add-row3');
    const inputTable3 = document.getElementById('input-table3');

    const addRowButton4 = document.getElementById('add-row4');
    const inputTable4 = document.getElementById('input-table4');

    const addRowButton5 = document.getElementById('add-row5');
    const inputTable5 = document.getElementById('input-table5');

    const addRowButton6 = document.getElementById('add-row6');
    const inputTable6 = document.getElementById('input-table6');

    // 获取页面元素-密码本
    const searchInput = document.getElementById('searchInput');

    const addRowButton8 = document.getElementById('add-row8');
    const inputTable8 = document.getElementById('input-table8');

    const addRowButton9 = document.getElementById('add-row9');
    const inputTable9 = document.getElementById('input-table9');

    const addRowButton10 = document.getElementById('add-row10');
    const inputTable10 = document.getElementById('input-table10');

    // 节点订阅-节点类型转换按钮选项框
    var buttons = document.querySelectorAll('.buttonChooseProxies');
    var selectedButtonId = sessionStorage.getItem('selected-button-id');

    // 输入框显示线程数
    const threadNum = document.getElementById('threads');

    // 节点订阅-服务器选择
    const proxymodelswitch = document.getElementById('proxy-model-switch');
    const dropdown = document.querySelector('.dropdown');
    const list = dropdown.querySelector('.dropdown-content');

    // 节点订阅-模板选择
    const proxymodelswitch2 = document.getElementById('proxy-model-switch2');
    const dropdown2 = document.querySelector('.dropdown2');
    const list2 = dropdown2.querySelector('.dropdown-content2');

    // 输入框显示中国DNS服务器
    const chinaDnsServer = document.getElementById('chinaDnsServer');

    // 输入框显示外国DNS服务器
    const extraDnsServer = document.getElementById('extraDnsServer');

    // 输入框显示外国DNS端口
    const extraDnsPort = document.getElementById('extraDnsPort');

    // 输入框显示直播源订阅加密密码
    const threadNum2 = document.getElementById('threads2');

    // 输入框显示域名白名单订阅加密密码
    const chinaDnsServer2 = document.getElementById('chinaDnsServer2');

    // 输入框显示域名黑名单订阅加密密码
    const chinaDnsPort2 = document.getElementById('chinaDnsPort2');

    // 输入框显示IPV4订阅加密密码
    const extraDnsServer2 = document.getElementById('extraDnsServer2');

    // 输入框显示IPV6订阅加密密码
    const extraDnsPort2 = document.getElementById('extraDnsPort2');

    // 输入框显示节点订阅加密密码
    const extraDnsPort3 = document.getElementById('extraDnsPort3');

    // 输入框显示gitee账号用户名
    const giteeUsername = document.getElementById('giteeUsername');
    // 输入框显示github账号用户名
    const githubUsername = document.getElementById('githubUsername');
    // 输入框显示gitee仓库名字
    const giteeRePoname = document.getElementById('giteeRePoname');
    // 输入框显示github仓库名字
    const githubRePoname = document.getElementById('githubRePoname');
    // 输入框显示gitee仓库路径
    const giteePath = document.getElementById('giteePath');
    // 输入框显示github仓库路径
    const githubPath = document.getElementById('githubPath');
    // 输入框显示gitee accestoken
    const giteeAcessToken = document.getElementById('giteeAcessToken');
    // 输入框显示github accestoken
    const githubAcessToken = document.getElementById('githubAcessToken');
    // 输入框显示webdav仓库路径
    const webdavPath = document.getElementById('webdavPath');
    // 输入框显示webdav账号用户名
    const webdavUsername = document.getElementById('webdavUsername');
    // 输入框显示webdav账号密码
    const webdavPassword = document.getElementById('webdavPassword');
    // 输入框显示webdav账户协议
    const webdavAgreement = document.getElementById('webdavAgreement');
    // 输入框显示webdav账户端口
    const webdavPort = document.getElementById('webdavPort');
    // 输入框显示webdav账户地址
    const webdavIp = document.getElementById('webdavIp');

    // 输入框显示webdav账号用户名
    const webdavUsernameM3u = document.getElementById('webdavUsernameM3u');
    // 输入框显示webdav密码
    const webdavPassM3u = document.getElementById('webdavPassM3u');

    const minTimeout = document.getElementById('minTimeout');
    const maxTimeout = document.getElementById('maxTimeout');
    const usernameSys = document.getElementById('usernameSys');
    const passwordSys = document.getElementById('passwordSys');
    const normalM3uClock = document.getElementById('normalM3uClock');
    const normalSubscriberClock = document.getElementById('normalSubscriberClock');
    const proxySubscriberClock = document.getElementById('proxySubscriberClock');
    const spM3uClock = document.getElementById('spM3uClock');
    const autoDnsSwitchClock = document.getElementById('autoDnsSwitchClock');
    const syncClock = document.getElementById('syncClock');
    const reliveAlistTsTime = document.getElementById('reliveAlistTsTime');
    const chinaTopDomain = document.getElementById('chinaTopDomain');
    const foreignTopDomain = document.getElementById('foreignTopDomain');
    const dnsMode = document.getElementById('dnsMode');

    const allM3u = document.getElementById('allM3u');
    const allM3uSecret = document.getElementById('allM3uSecret');
    const aliveM3u = document.getElementById('aliveM3u');
    const healthM3u = document.getElementById('healthM3u');
    const tvDomainForAdguardhome = document.getElementById('tvDomainForAdguardhome');
    const tvDomainForAdguardhomeSecret = document.getElementById('tvDomainForAdguardhomeSecret');
    const whiteListDnsmasq = document.getElementById('whiteListDnsmasq');
    const whiteListDnsmasqSecret = document.getElementById('whiteListDnsmasqSecret');
    const whiteListDomian = document.getElementById('whiteListDomian');
    const whiteListDomianSecret = document.getElementById('whiteListDomianSecret');
    const whitelistDirectRule = document.getElementById('whitelistDirectRule');
    const openclashFallbackFilterDomain = document.getElementById('openclashFallbackFilterDomain');
    const openclashFallbackFilterDomainSecret = document.getElementById('openclashFallbackFilterDomainSecret');
    const blackListDomain = document.getElementById('blackListDomain');
    const blackListDomainSecret = document.getElementById('blackListDomainSecret');
    const blacklistProxyRule = document.getElementById('blacklistProxyRule');
    const ipv4 = document.getElementById('ipv4');
    const ipv4Secret = document.getElementById('ipv4Secret');
    const ipv6 = document.getElementById('ipv6');
    const ipv6Secret = document.getElementById('ipv6Secret');
    const proxyConfig = document.getElementById('proxyConfig');
    const proxyConfigSecret = document.getElementById('proxyConfigSecret');

    const addRowButton11 = document.getElementById('add-row11');
    const inputTable11 = document.getElementById('input-table11');

    const addRowButton15 = document.getElementById('add-row15');
    const inputTable15 = document.getElementById('input-table15');

    const addRowButton16 = document.getElementById('add-row16');
    const inputTable16 = document.getElementById('input-table16');

    const addRowButton17 = document.getElementById('add-row17');
    const inputTable17 = document.getElementById('input-table17');

    const addRowButton18 = document.getElementById('add-row18');
    const inputTable18 = document.getElementById('input-table18');
    // 输入框显示主机ip
    const iptext = document.getElementById('iptext');
    var iptextCache = sessionStorage.getItem('iptext');

    // 获取所有具有类名 "urllink" 的 h3 元素
    var elements = document.getElementsByClassName("urllink");

    const addRowButton12 = document.getElementById('add-row12');
    const inputTable12 = document.getElementById('input-table12');
    const downloadBtn12 = document.getElementById('download-json-btn12');

    const addRowButton13 = document.getElementById('add-row13');
    const inputTable13 = document.getElementById('input-table13');
    const downloadBtn13 = document.getElementById('download-json-btn13');

    const addRowButton24 = document.getElementById('add-row24');
    const inputTable24 = document.getElementById('input-table24');
    const downloadBtn24 = document.getElementById('download-json-btn24');

    const addRowButton25 = document.getElementById('add-row25');
    const inputTable25 = document.getElementById('input-table25');
    const downloadBtn25 = document.getElementById('download-json-btn25');

    const addRowButton26 = document.getElementById('add-row26');
    const inputTable26 = document.getElementById('input-table26');
    const downloadBtn26 = document.getElementById('download-json-btn26');

    const addRowButton27 = document.getElementById('add-row27');
    const inputTable27 = document.getElementById('input-table27');
    const downloadBtn27 = document.getElementById('download-json-btn27');

    const addRowButton28 = document.getElementById('add-row28');
    const inputTable28 = document.getElementById('input-table28');
    const downloadBtn28 = document.getElementById('download-json-btn28');

    const addRowButton29 = document.getElementById('add-row29');
    const inputTable29 = document.getElementById('input-table29');
    const downloadBtn29 = document.getElementById('download-json-btn29');

    const addRowButton30 = document.getElementById('add-row30');
    const inputTable30 = document.getElementById('input-table30');
    const downloadBtn30 = document.getElementById('download-json-btn30');

    // 输入框显示中国DNS端口
    const chinaDnsPort = document.getElementById('chinaDnsPort');

    // 输入框显示dns并发查询数
    const queryThreadNum = document.getElementById('queryThreadNum');

    // 输入框显示通信超时时间
    const timeout = document.getElementById('timeout');

    const inputTable14 = document.getElementById('input-table14');
    const downloadBtn14 = document.getElementById('download-json-btn14');

    const li = document.getElementById('bitcoin'); // 获取要添加点击事件的li元素

    li.addEventListener('click', () => {
        window.location.href = 'bitcoin:BC1QCA337CSCNUFCGLLKZF4UTPLFX0YDZ66UAE38U9?amount=0.00010000&label=%E8%AF%B7%E6%88%91%E5%96%9D%E6%9D%AF%E8%8C%B6%E5%90%A7&message=%E8%AF%B7%E6%88%91%E5%96%9D%E6%9D%AF%E8%8C%B6%E5%90%A7';
    });

    const imageElement = document.getElementById('bitcoin-image');

    // 获取页面元素-历史订阅密码
    const searchInput2 = document.getElementById('searchInput2');
    // 获取页面元素-m3u白名单
    const searchInput3 = document.getElementById('searchInput3');
    // 获取页面元素-简易dns白名单
    const searchInput4 = document.getElementById('searchInput4');
    // 获取页面元素-简易dns黑名单
    const searchInput5 = document.getElementById('searchInput5');
    // 获取页面元素-直播源订阅
    const searchInput6 = document.getElementById('searchInput6');
    // 获取页面元素-域名白名单订阅
    const searchInput7 = document.getElementById('searchInput7');
    // 获取页面元素-域名黑名单订阅
    const searchInput8 = document.getElementById('searchInput8');
    // 获取页面元素-ipv4订阅
    const searchInput9 = document.getElementById('searchInput9');
    // 获取页面元素-ipv6订阅
    const searchInput10 = document.getElementById('searchInput10');
    // 获取页面元素-节点订阅
    const searchInput11 = document.getElementById('searchInput11');
    // 获取页面元素-节点远程配置订阅
    const searchInput12 = document.getElementById('searchInput12');
    // 获取页面元素-节点后端配置订阅
    const searchInput13 = document.getElementById('searchInput13');
    // 获取页面元素-m3u黑名单
    const searchInput14 = document.getElementById('searchInput14');
    // 获取页面元素-m3u白名单分组优先级
    const searchInput16 = document.getElementById('searchInput16');
    // 获取页面元素-下载加密上传
    const searchInput17 = document.getElementById('searchInput17');
    // 获取页面元素-下载解密
    const searchInput18 = document.getElementById('searchInput18');
    // 获取页面元素-youtube直播源
    const searchInput24 = document.getElementById('searchInput24');
    // 获取页面元素-bilibili直播源
    const searchInput25 = document.getElementById('searchInput25');
    // 获取页面元素-huya直播源
    const searchInput26 = document.getElementById('searchInput26');
    // 获取页面元素-YY直播源
    const searchInput27 = document.getElementById('searchInput27');

    searchAddListener2(searchInput18, inputTable18)
    searchAddListener2(searchInput17, inputTable17)
    // 给m3u白名单分组优先级搜索框绑定'oninput'事件
    searchAddListener(searchInput16, inputTable16)
    // 给m3u黑名单搜索框绑定'oninput'事件
    searchAddListener(searchInput14, inputTable15)
    // 给节点后端配置订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput13, inputTable10)
    // 给节点远程配置订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput12, inputTable9)
    // 给节点订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput11, inputTable8)
    // 给ipv6订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput10, inputTable5)
    // 给ipv4订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput9, inputTable4)
    // 给域名黑名单订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput8, inputTable3)
    // 给域名白名单订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput7, inputTable2)
    // 给直播源订阅搜索框绑定'oninput'事件
    searchAddListener(searchInput6, inputTable)
    // 给简易dns白名单搜索框绑定'oninput'事件
    searchAddListener(searchInput5, inputTable13)
    // 给youtube直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput24, inputTable24)
    // 给bilibili直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput25, inputTable25)
    // 给huya直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput26, inputTable26)
    // 给YY直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput27, inputTable27)
    // 给TWITCH直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput28, inputTable28)
    // 给DOUYIN直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput29, inputTable29)
    // 给alist直播源搜索框绑定'oninput'事件
    searchAddListener(searchInput30, inputTable30)
    // 给简易dns白名单搜索框绑定'oninput'事件
    searchAddListener(searchInput4, inputTable12)
    // 给m3u白名单搜索框绑定'oninput'事件
    searchAddListener(searchInput3, inputTable11)
    // 给历史订阅密码搜索框绑定'oninput'事件
    searchAddListener(searchInput2, inputTable14)
    // 给密码本搜索框绑定'oninput'事件
    searchAddListener(searchInput, inputTable6)

    // 下拉菜单搜索框监听
    function searchAddListener(searchInputVar, tableVar) {
        searchInputVar.addEventListener('input', () => {
            // 获取搜索框的值
            const keyword = searchInputVar.value.trim().toLowerCase();
            // 遍历密码列表，只显示符合搜索框值的密码
            const passwordRows = tableVar.querySelectorAll('tr');
            passwordRows.forEach((row) => {
                const passwordName = row.querySelector('.suburlclassname').value.trim().toLowerCase();
                const passwordValue = row.querySelector('.subnameClassName').value.trim().toLowerCase();
                if (passwordName.includes(keyword) || passwordValue.includes(keyword)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    }

    // 下拉菜单搜索框监听
    function searchAddListener2(searchInputVar, tableVar) {
        searchInputVar.addEventListener('input', () => {
            // 获取搜索框的值
            const keyword = searchInputVar.value.trim().toLowerCase();
            // 遍历密码列表，只显示符合搜索框值的密码
            const passwordRows = tableVar.querySelectorAll('tr');
            passwordRows.forEach((row) => {
                const passwordName = row.querySelector('.suburlclassname2').value.trim().toLowerCase();
                const passwordValue = row.querySelector('.subnameClassName2').value.trim().toLowerCase();
                const passwordValue2 = row.querySelector('.passwordClassName2').value.trim().toLowerCase();
                if (passwordName.includes(keyword) || passwordValue.includes(keyword) || passwordValue2.includes(keyword)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    }

    function reloadImage() {
        fetch('/api/get_image')
            .then((response) => response.blob())
            .then((blob) => {
                imageElement.src = URL.createObjectURL(blob);
            });
    }


    function reloadFunctionOpenButton(id) {
        var switchButton = document.getElementById(id);
        const xhr = new XMLHttpRequest();
        xhr.open('POST', '/api/getSwitchstate');
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    const response = JSON.parse(xhr.responseText);
                    state = response.checkresult
                    if (state === '1' || state === 1) {
                        switchButton.classList.remove("off");
                        switchButton.classList.add("on");
                        switchButton.textContent = "已开启";
                    } else {
                        switchButton.classList.remove("on");
                        switchButton.classList.add("off");
                        switchButton.textContent = "已关闭";
                    }
                } else {
                    //alert('获取功能开启状态失败：' + xhr.statusText);
                }
            }
        };
        xhr.send(JSON.stringify({'id': id}));
    }

    // 发送请求到后端
    function sendRequest(state, id) {
        fetch('/api/switchstate', {
            method: 'POST',
            body: JSON.stringify({'state': state, 'id': id}),
            headers: {'Content-Type': 'application/json'}
        }).catch(error => console.error(error));
    }

    function serverMode() {
        fetch('/api/serverMode', {
            method: 'POST',
            body: JSON.stringify({'mode': 'server'}),
            headers: {'Content-Type': 'application/json'}
        }).catch(error => console.error(error));
        location.reload()
    }

    function clientMode() {
        fetch('/api/serverMode', {
            method: 'POST',
            body: JSON.stringify({'mode': 'client'}),
            headers: {'Content-Type': 'application/json'}
        }).catch(error => console.error(error));
        location.reload()
    }

    // 切换开关状态
    function toggleSwitch(id) {
        var switchButton = document.getElementById(id);
        if (switchButton.classList.contains("on")) {
            switchButton.classList.remove("on");
            switchButton.classList.add("off");
            switchButton.textContent = "已关闭";
            sendRequest(0, id);
        } else {
            switchButton.classList.remove("off");
            switchButton.classList.add("on");
            switchButton.textContent = "已开启";
            sendRequest(1, id);
        }
    }

    function stopMonitoring() {
        // 遍历所有元素并移除点击事件处理程序
        for (var i = 0; i < elements.length; i++) {
            elements[i].removeEventListener("click", handleClick);
        }
    }

    function addMonitoring() {
        // 遍历所有元素并添加点击事件
        for (var i = 0; i < elements.length; i++) {
            elements[i].addEventListener("click", handleClick);
        }
    }

    function handleClick() {
        text = this.textContent.split(":")
        // 获取 URL
        var url = text[1] + [':'] + text[2] + [':'] + text[3];
        // 在新窗口中打开链接
        window.open(url, "_blank");
    }

    function changeUrls() {
        // 获取所有具有类名 "urllink" 的 h3 元素
        var elements = document.getElementsByClassName("urllink");
        // 遍历所有元素并更改它们的内容
        for (var i = 0; i < elements.length; i++) {
            // 分解文本为三个部分
            var text = elements[i].innerHTML;
            var parts = text.split(":");
            var prefix = parts[0] + ":" + parts[1] + ":";
            var suffix = ":" + parts[3];
            var parts2 = suffix.split("/")
            var suffix2 = parts2[0] + "/" + parts2[1]
            // 生成新的 URL
            var newIp = sessionStorage.getItem('iptext'); // 新的 IP 地址
            var tagnamefile = parts2[2]
            var parts3 = tagnamefile.split(".")
            var tagname = parts3[0]
            if (tagname === 'youtube' || tagname === 'bilibili' || tagname === 'huya' || tagname === 'YY' || tagname==='TWITCH'||tagname==='Douyin'||tagname==='alist' ) {
                elements[i].innerHTML = prefix + "//" + newIp + suffix2 + "/" + tagname + "." + parts3[1];
                continue
            }
            if (tagname==='allM3u' && parts3[1]==='txt'){
                elements[i].innerHTML = prefix + "//" + newIp + suffix2 + "/" + tagname + "." + parts3[1];
                continue
            }
            // 设置新的 URL
            var currName = sessionStorage.getItem(tagname);
            if (currName && currName !== "") {
                elements[i].innerHTML = prefix + "//" + newIp + suffix2 + "/" + currName + "." + parts3[1];
            }
        }

    }


    function changePassword(cacheKey, id, idVar) {
        PostDataByAskAndReturn('/api/changeSubscribePassword', cacheKey, '获取功能开启状态失败：')
            .then(function (returnValue) {
                idVar.value = returnValue;
                sessionStorage.setItem(id, returnValue);
            })
            .catch(function (error) {
                console.log(error);
            });
    }

    function getFileName(cacheKey, id, idVar) {
        // var filename = sessionStorage.getItem(id);
        //if (filename && filename !== '') {
        // idVar.value = filename;
        // } else {
        PostDataByAskAndReturn('/api/getFileName', cacheKey, '订阅文件名字获取失败：')
            .then(function (returnValue) {
                idVar.value = returnValue;
                sessionStorage.setItem(id, returnValue);
            })
            .catch(function (error) {
                console.log(error);
            });
        // }
    }

    function changePasswordByHand(cacheKey, id, idVar) {
        PostDataByAsk2AndReturn('/api/changeSubscribePasswordByHand', cacheKey, idVar.value)
            .then(function (returnValue) {
                sessionStorage.setItem(id, idVar.value);
            })
            .catch(function (error) {
                console.log(error);
            });
    }


    function changeFileName(cacheKey, id, idVar) {
        PostDataByAsk2AndReturn('/api/changeFileName', cacheKey, idVar.value)
            .then(function (returnValue) {
                sessionStorage.setItem(id, idVar.value);
            })
            .catch(function (error) {
                console.log(error);
            });
    }

    function getSyncData(cacheKey, type, id, idVar) {
        //var cachevalue = sessionStorage.getItem(id);
        //if (cachevalue && cachevalue !== '') {
        ///idVar.value = cachevalue;
        // } else {
        PostDataByAsk2AndReturn('/api/getSyncAccountData', cacheKey, type)
            .then(function (returnValue) {
                idVar.value = returnValue;
                sessionStorage.setItem(id, returnValue);
            })
            .catch(function (error) {
                console.log(error);
            });
        // }
    }

    function changeSyncData(cacheKey, type, id, idVar) {
        PostDataByAsk3AndReturn('/api/changeSyncData', cacheKey, type, idVar.value)
            .then(function (returnValue) {
                //idVar.value = returnValue;
                //sessionStorage.setItem(id, idVar.value);
            })
            .catch(function (error) {
                console.log(error);
            });
    }

    // 发送一个cachekey,requestpath,一个值type,一个值修改值,有返回值
    function PostDataByAsk3AndReturn(requestPath, cacheKey, type, textvalue) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', requestPath);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        const response = JSON.parse(xhr.responseText);
                        resolve(response.password);
                    } else {
                        reject(new Error('fail' + xhr.statusText));
                    }
                }
            };
            xhr.send(JSON.stringify({'cacheKey': cacheKey, 'type': type, 'inputvalue': textvalue}));
        });
    }

    // 发送一个cachekey,requestpath,一个值,有返回值
    function PostDataByAsk2AndReturn(requestPath, cacheKey, textvalue) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', requestPath);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        const response = JSON.parse(xhr.responseText);
                        resolve(response.password);
                    } else {
                        reject(new Error('fail' + xhr.statusText));
                    }
                }
            };
            xhr.send(JSON.stringify({'cacheKey': cacheKey, 'inputvalue': textvalue}));
        });
    }

    // 发送一个cachekey,requestpath,返回一个值
    function PostDataByAskAndReturn(requestPath, cacheKey, errcode) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', requestPath);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        const response = JSON.parse(xhr.responseText);
                        resolve(response.password);
                    } else {
                        reject(new Error(errcode + xhr.statusText));
                    }
                }
            };
            xhr.send(JSON.stringify({'cacheKey': cacheKey}));
        });
    }

    //修改外国DNS端口
    function saveExtraDnsPort() {
        saveDnsSetting('/api/saveExtraDnsPort', 'extraDnsPort', extraDnsPort)
    }

    //外国DNS端口加载
    function reloadExtraDnsPort() {
        reloadDnsSetting(extraDnsPort, '/api/getExtraDnsPort')
    }

    //主机IP加载
    function reloadIP() {
        reloadDnsSetting(iptext, '/api/getIP')
        getFileName('allM3u', 'allM3u', allM3u)
        getFileName('allM3uSecret', 'allM3uSecret', allM3uSecret)
        getFileName('aliveM3u', 'aliveM3u', aliveM3u)
        getFileName('healthM3u', 'healthM3u', healthM3u)
        getFileName('tvDomainForAdguardhome', 'tvDomainForAdguardhome', tvDomainForAdguardhome)
        getFileName('tvDomainForAdguardhomeSecret', 'tvDomainForAdguardhomeSecret', tvDomainForAdguardhomeSecret)
        getFileName('whiteListDnsmasq', 'whiteListDnsmasq', whiteListDnsmasq)
        getFileName('whiteListDnsmasqSecret', 'whiteListDnsmasqSecret', whiteListDnsmasqSecret)
        getFileName('whiteListDomian', 'whiteListDomian', whiteListDomian)
        getFileName('whiteListDomianSecret', 'whiteListDomianSecret', whiteListDomianSecret)
        getFileName('whitelistDirectRule', 'whitelistDirectRule', whitelistDirectRule)
        getFileName('openclashFallbackFilterDomain', 'openclashFallbackFilterDomain', openclashFallbackFilterDomain)
        getFileName('openclashFallbackFilterDomainSecret', 'openclashFallbackFilterDomainSecret', openclashFallbackFilterDomainSecret)
        getFileName('blackListDomain', 'blackListDomain', blackListDomain)
        getFileName('blackListDomainSecret', 'blackListDomainSecret', blackListDomainSecret)
        getFileName('blacklistProxyRule', 'blacklistProxyRule', blacklistProxyRule)
        getFileName('ipv4', 'ipv4', ipv4)
        getFileName('ipv4Secret', 'ipv4Secret', ipv4Secret)
        getFileName('ipv6', 'ipv6', ipv6)
        getFileName('ipv6Secret', 'ipv6Secret', ipv6Secret)
        getFileName('proxyConfig', 'proxyConfig', proxyConfig)
        getFileName('proxyConfigSecret', 'proxyConfigSecret', proxyConfigSecret)
        changeUrls()
        addMonitoring()
    }

    //修改外国DNS服务器
    function saveExtraDnsServer() {
        saveDnsSetting('/api/saveExtraDnsServer', 'extraDnsServer', extraDnsServer)
    }

    //外国DNS服务器加载
    function reloadExtraDnsServer() {
        reloadDnsSetting(extraDnsServer, '/api/getExtraDnsServer')
    }

    //修改中国DNS端口
    function saveChinaDnsPort() {
        saveDnsSetting('/api/savechinaDnsPort', 'chinaDnsPort', chinaDnsPort)
    }

    //修改DNS并发查询数
    function saveQueryThreadNum() {
        saveDnsSetting('/api/savequeryThreadNum', 'queryThreadNum', queryThreadNum)
    }

    //修改DNS通信时间
    function saveTimeout() {
        saveDnsSetting('/api/savetimeout', 'timeout', timeout)
    }

    //修改主机IP
    function changeIP() {
        saveDnsSetting('/api/changeIP', 'iptext', iptext)
        //changeUrls()
        stopMonitoring()
        addMonitoring()
    }

    //中国DNS端口加载
    function reloadChinaDnsPort() {
        reloadDnsSetting(chinaDnsPort, '/api/getChinaDnsPort')
    }

    //DNS并发查询数
    function reloadQueryThreadNum() {
        reloadDnsSetting(queryThreadNum, '/api/getQueryThreadNum')
    }

    //通信超时时间查询
    function reloadTimeout() {
        reloadDnsSetting(timeout, '/api/gettimeout')
    }

    //修改中国DNS服务器
    function saveChinaDnsServer() {
        saveDnsSetting('/api/savechinaDnsServer', 'chinaDnsServer', chinaDnsServer)
    }

    //中国DNS服务器加载
    function reloadChinaDnsServer() {
        reloadDnsSetting(chinaDnsServer, '/api/getChinaDnsServer')
    }

    //线程数加载
    function reloadThreadNum() {
        reloadDnsSetting(threadNum, '/api/getThreadNum')
    }

    //直播源订阅密码加载
    function reloadThreadNum2() {
        reloadDnsSetting(threadNum2, '/api/getThreadNum2')
    }

    //域名白名单订阅密码加载
    function reloadChinaDnsServer2() {
        reloadDnsSetting(chinaDnsServer2, '/api/getChinaDnsServer2')
    }

    //域名黑名单订阅密码加载
    function reloadChinaDnsPort2() {
        reloadDnsSetting(chinaDnsPort2, '/api/getChinaDnsPort2')
    }

    //IPV4订阅密码加载
    function reloadExtraDnsServer2() {
        reloadDnsSetting(extraDnsServer2, '/api/getExtraDnsServer2')
    }

    //IPV6订阅密码加载
    function reloadExtraDnsPort2() {
        reloadDnsSetting(extraDnsPort2, '/api/getExtraDnsPort2')
    }

    //节点订阅密码加载
    function reloadExtraDnsPort3() {
        reloadDnsSetting(extraDnsPort3, '/api/getExtraDnsPort3')
    }

    //修改线程数
    function saveData() {
        saveDnsSetting('/api/saveThreadS', 'threads', threadNum)
    }

    function reloadDnsSetting(targetConst, requestpath) {
        //if (targetcache&&targetcache !== '') {
        // targetConst.value = targetcache
        //} else {
        // 发送 GET 请求
        fetch(requestpath)
            .then(response => response.json())  // 将响应体解析为 JSON 格式
            .then(data => {
                // 更新服务器设置
                targetConst.value = data.button;
                if (requestpath === '/api/getIP') {
                    sessionStorage.setItem('iptext', data.button);
                }
                // sessionStorage.setItem(targetCacheName, data.button);
            })
        // }
    }

    function saveDnsSetting(requestPath, id, idVar) {
        let data = document.getElementById(id).value;
        sendData(requestPath, data);
        idVar.value = data;
        sessionStorage.setItem(id, data);
    }


    // 节点订阅-节点类型如果存在已选择按钮，则将该按钮设置为活动状态
    if (selectedButtonId) {
        var selectedButton = document.getElementById(selectedButtonId);
        if (selectedButton) {
            selectedButton.classList.add('active');
        }
    }


    function reloadProxyModels(requestpath, value) {
        if (requestpath === '/api/getall10') {
            const li = document.createElement('li');
            li.textContent = value
            if (!list.textContent.includes(value)) {
                list.appendChild(li);
            }
            // 监听下拉菜单项点击事件
            li.addEventListener('click', () => {
                // 更新默认服务器
                proxymodelswitch.textContent = value;
                // 发送数据到后端
                sendData('/api/chooseProxyServer', value);
                // 隐藏下拉菜单
                dropdown.classList.remove('active');
            });
        }
        if (requestpath === '/api/getall9') {
            const li = document.createElement('li');
            li.textContent = value;
            if (!list2.textContent.includes(value)) {
                list2.appendChild(li);
            }
            // 监听下拉菜单项点击事件
            li.addEventListener('click', () => {
                // 更新默认配置
                proxymodelswitch2.textContent = value;
                // 发送数据到后端
                sendData('/api/chooseProxyModel', value);
                // 隐藏下拉菜单
                dropdown2.classList.remove('active');
            });
        }
    }

    // 监听节点服务器按钮点击事件，用于显示/隐藏下拉菜单
    proxymodelswitch.addEventListener('click', () => {
        dropdown.classList.toggle('active');
    });

    // 监听节点远程配置按钮点击事件，用于显示/隐藏下拉菜单
    proxymodelswitch2.addEventListener('click', () => {
        dropdown2.classList.toggle('active');
    });

    // 节点订阅-修改默认的代理模板，只POST不需要返回值
    function sendData(requestPath, name) {
        // TODO: 发送请求到后端
        // 发送选择按钮的请求给后端
        fetch(requestPath, {
            method: 'POST',
            body: JSON.stringify({'selected_button': name}),
            headers: {'Content-Type': 'application/json'}
        }).catch(error => console.error(error));
    }


    function reloadSelectedServer() {
        // 发送 GET 请求
        fetch('/api/getSelectedServer')
            .then(response => response.json())  // 将响应体解析为 JSON 格式
            .then(data => {
                // 更新服务器设置
                proxymodelswitch.textContent = data.button;
            }).catch(error => console.error(error));
    }

    function reloadSelectedModel() {
        // 发送 GET 请求
        fetch('/api/getSelectedModel')
            .then(response => response.json())  // 将响应体解析为 JSON 格式
            .then(data => {
                // 更新模板配置
                proxymodelswitch2.textContent = data.button;
            }).catch(error => console.error(error));
    }


    function reloadSelectedButtonId() {
        // 发送 GET 请求
        fetch('/api/getSelectedButtonId')
            .then(response => response.json())  // 将响应体解析为 JSON 格式
            .then(data => {
                const buttonId = data.button;  // 查找 ID 匹配的用户信息
                // id存到缓存
                sessionStorage.setItem('selected-button-id', buttonId);
                // 刷新类型按钮颜色
                var selectedButton = document.getElementById(buttonId);
                selectedButton.classList.add('active');
            }).catch(error => console.error(error));
    }

    function setActiveButton(button) {
        // 如果选择相同的按钮，则不进行操作
        if (!button.classList.contains('active')) {
            // 将所有按钮设为绿色
            buttons.forEach(function (btn) {
                btn.classList.remove('active');
            });
            // 将当前按钮设为红色
            button.classList.add('active');
            // 将选择的按钮ID存储到 sessionStorage 中
            sessionStorage.setItem('selected-button-id', button.id);
            // 发送选择按钮的请求给后端
            fetch('/api/chooseProxy', {
                method: 'POST',
                body: JSON.stringify({'selected_button': button.id}),
                headers: {'Content-Type': 'application/json'}
            });
        }
    }

    // 节点订阅-绑定按钮的点击事件
    buttons.forEach(function (button) {
        button.addEventListener('click', function () {
            setActiveButton(button);
        });
    });

    //超融合M3U-从数据库拉取订阅列表数据
    function reload() {
        reloadBase('/api/getall', inputTable)
    }

    //超融合节点订阅-从数据库拉取订阅列表数据
    function reloadProxiesListLink() {
        reloadBase('/api/getall8', inputTable8)
    }

    //超融合节点订阅远程配置-从数据库拉取订阅列表数据
    function reloadProxyModelListLink() {
        reloadBase('/api/getall9', inputTable9)
    }

    //超融合节点订阅后端配置-从数据库拉取订阅列表数据
    function reloadProxyServerListLink() {
        reloadBase('/api/getall10', inputTable10)
    }

    //M3U白名单-从数据库拉取关键字列表数据
    function reloadM3uWhiteList() {
        reloadBase('/api/getall11', inputTable11)
    }

    //M3U白名单分组优先级-从数据库拉取关键字列表数据
    function reloadM3uWhiteListRank() {
        reloadBase('/api/getall16', inputTable16)
    }

    //下载加密上传-从数据库拉取关键字列表数据
    function reloadDownLoadAndSecretUpload() {
        reloadBase2('/api/getall17', inputTable17)
    }

    //下载解密-从数据库拉取关键字列表数据
    function reloadDownLoadAndDeSecret() {
        reloadBase2('/api/getall18', inputTable18)
    }

    //M3U黑名单-从数据库拉取关键字列表数据
    function reloadM3uBlackList() {
        reloadBase('/api/getall15', inputTable15)
    }

    //DNS简易白名单-从数据库拉取关键字列表数据
    function reloadDNSSIMPLEWhiteList() {
        reloadBase('/api/getall12', inputTable12)
    }

    //DNS简易黑名单-从数据库拉取关键字列表数据
    function reloadDNSSIMPLEBlackList() {
        reloadBase('/api/getall13', inputTable13)
    }

    //youtube直播源-从数据库拉取关键字列表数据
    function reloadYoutubeM3U() {
        reloadBase('/api/getall24', inputTable24)
    }

    //bilibili直播源-从数据库拉取关键字列表数据
    function reloadBilibiliM3U() {
        reloadBase('/api/getall25', inputTable25)
    }


    //huya直播源-从数据库拉取关键字列表数据
    function reloadHuyaM3U() {
        reloadBase('/api/getall26', inputTable26)
    }

    //YY直播源-从数据库拉取关键字列表数据
    function reloadYYM3U() {
        reloadBase('/api/getall27', inputTable27)
    }

    //TWITCH直播源-从数据库拉取关键字列表数据
    function reloadTWITCHM3U() {
        reloadBase('/api/getall28', inputTable28)
    }

    //DOUYIN直播源-从数据库拉取关键字列表数据
    function reloadDOUYINM3U() {
        reloadBase('/api/getall29', inputTable29)
    }

    //aist直播源-从数据库拉取关键字列表数据
    function reloadAlistM3U() {
        reloadBase('/api/getall30', inputTable30)
    }

    //加密订阅密码历史记录-从数据库拉取关键字列表数据
    function reloadHistorySubscribePassList() {
        reloadBase('/api/getall14', inputTable14)
    }

    //超融合ipv6-从数据库拉取订阅列表数据
    function reloadIpv6ListLink() {
        reloadBase('/api/getall5', inputTable5)
    }

    //超融合ipv4-从数据库拉取订阅列表数据
    function reloadIpv4ListLink() {
        reloadBase('/api/getall4', inputTable4)
    }

    //超融合白名单-从数据库拉取订阅列表数据
    function reloadWhiteListLink() {
        reloadBase('/api/getall2', inputTable2)
    }

    //超融合黑名单-从数据库拉取订阅列表数据
    function reloadBlackListLink() {
        reloadBase('/api/getall3', inputTable3)
    }

    //密码本-从数据库拉取密码列表数据
    function reloadPasswordList() {
        reloadBase('/api/getall6', inputTable6)
    }

    //从数据库拉取订阅列表数据
    function reloadBase(requestpath, inputTableElement) {
        // 旧的不去新的不来
        // 获取表格的tbody元素
        const tbody = inputTableElement.querySelector('tbody');
        // 获取所有的行元素
        const rows = tbody.querySelectorAll('tr');
        // 遍历每个行元素并删除
        rows.forEach((row) => {
            tbody.removeChild(row);
        });

        fetch(requestpath)
            .then(response => response.json())
            .then(data => {
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        //创建一个新的行
                        const row = document.createElement('tr');
                        const valueCell = document.createElement('td');
                        const valueInput = document.createElement('input');
                        valueInput.type = 'text';
                        valueInput.classList.add('suburlclassname');
                        valueInput.value = key;
                        valueCell.appendChild(valueInput);
                        const taeinput = document.createElement('input');
                        taeinput.type = 'text';
                        taeinput.classList.add('subnameClassName');
                        taeinput.value = data[key];
                        valueCell.appendChild(taeinput);
                        const actionsCell = document.createElement('td');
                        const saveButton = document.createElement('button');
                        saveButton.textContent = '保存';
                        saveButton.classList.add('saveButtonClassName');
                        const deleteButton = document.createElement('button');
                        deleteButton.textContent = '删除';
                        deleteButton.classList.add('deleteButtonClassName');
                        actionsCell.appendChild(saveButton);
                        actionsCell.appendChild(deleteButton);
                        row.appendChild(valueCell);
                        row.appendChild(actionsCell);
                        inputTableElement.querySelector('tbody').appendChild(row);
                        //行内填充元素
                        // 特殊，列表name参数写入下拉列表
                        reloadProxyModels(requestpath, taeinput.value)
                    }
                }
            })
            .catch(error => console.error(error));
    }

    //从数据库拉取订阅列表数据,三个参数 -主键key,值字典(password+secretName)
    function reloadBase2(requestpath, inputTableElement) {
        // 旧的不去新的不来
        // 获取表格的tbody元素
        const tbody = inputTableElement.querySelector('tbody');
        // 获取所有的行元素
        const rows = tbody.querySelectorAll('tr');
        // 遍历每个行元素并删除
        rows.forEach((row) => {
            tbody.removeChild(row);
        });

        fetch(requestpath)
            .then(response => response.json())
            .then(data => {
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        //创建一个新的行
                        const row = document.createElement('tr');
                        const valueCell = document.createElement('td');
                        const valueInput = document.createElement('input');
                        valueInput.type = 'text';
                        valueInput.classList.add('suburlclassname2');
                        valueInput.value = key;
                        valueCell.appendChild(valueInput);
                        const taeinput = document.createElement('input');
                        taeinput.type = 'text';
                        taeinput.classList.add('passwordClassName2');
                        taeinput.value = data[key]['password'];
                        valueCell.appendChild(taeinput);
                        const taeinput2 = document.createElement('input');
                        taeinput2.type = 'text';
                        taeinput2.classList.add('subnameClassName2');
                        taeinput2.value = data[key]['secretName'];
                        valueCell.appendChild(taeinput2);
                        const actionsCell = document.createElement('td');
                        const changePasswordButton = document.createElement('button');
                        changePasswordButton.textContent = '换密码';
                        changePasswordButton.classList.add('changePasswordButtonClassName');
                        const saveButton = document.createElement('button');
                        saveButton.textContent = '保存';
                        saveButton.classList.add('saveButtonClassName2');
                        const deleteButton = document.createElement('button');
                        deleteButton.textContent = '删除';
                        deleteButton.classList.add('deleteButtonClassName2');
                        actionsCell.appendChild(changePasswordButton);
                        actionsCell.appendChild(saveButton);
                        actionsCell.appendChild(deleteButton);
                        row.appendChild(valueCell);
                        row.appendChild(actionsCell);
                        inputTableElement.querySelector('tbody').appendChild(row);
                    }
                }
            })
            .catch(error => console.error(error));
    }

    //保留订阅-白名单
    function saveInputValue2(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u2')
    }

    //保留订阅-黑名单
    function saveInputValue3(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u3')
    }

    //保留订阅-ipv4
    function saveInputValue4(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u4')
    }

    //保留订阅-ipv6
    function saveInputValue5(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u5')
    }

    //保留密码
    function saveInputValue6(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u6')
    }

    //保留节点订阅
    function saveInputValue8(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u8')
    }

    //保留订阅-节点远程配置
    function saveInputValue9(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u9')
    }

    //保留订阅-后端服务器配置
    function saveInputValue10(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u10')
    }

    //保留关键字-M3U白名单配置
    function saveInputValue11(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u11')
    }

    //保留关键字-M3U黑名单配置
    function saveInputValue15(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u15')
    }

    //保留关键字-M3U白名单分组优先级配置
    function saveInputValue16(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u16')
    }

    //保存修改-下载加密上传
    function saveInputValue17(url, password, name) {
        saveInputValuebase2(url, password, name, '/api/addnewm3u17')
    }

    //保存修改-下载解密
    function saveInputValue18(url, password, name) {
        saveInputValuebase2(url, password, name, '/api/addnewm3u18')
    }


    //简易DNS白名单配置
    function saveInputValue12(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u12')
    }

    //加密订阅密码历史记录
    function saveInputValue14(inputValue, name) {
        alert('该功能不提供修改数据权限');
    }

    //简易DNS黑名单配置
    function saveInputValue13(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u13')
    }

    //youtube配置
    function saveInputValue24(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u24')
    }

    //bilibili配置
    function saveInputValue25(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u25')
    }


    //huya配置
    function saveInputValue26(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u26')
    }

    //YY配置
    function saveInputValue27(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u27')
    }

    //TWITCH配置
    function saveInputValue28(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u28')
    }

    //DOUYIN配置
    function saveInputValue29(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u29')
    }

    //alist配置
    function saveInputValue30(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u30')
    }

    //永久列表-保留输入行数据
    function savem3uInputValue(url, info) {
        saveInputValuebase(url, info, '/api/addm3udata')
    }

    //保留订阅-超融合
    function saveInputValue(inputValue, name) {
        saveInputValuebase(inputValue, name, '/api/addnewm3u')
    }

    function saveInputValuebase(inputValue, name, requestpath) {
        // 其他情况
        const xhr = new XMLHttpRequest();
        xhr.open('POST', requestpath);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                } else {
                    alert('存储失败：' + xhr.statusText);
                }
            }
        };
        xhr.send(JSON.stringify({'addurl': inputValue, 'name': name}));
    }

    function saveInputValuebase2(url, password, secretName, requestpath) {
        // 其他情况
        const xhr = new XMLHttpRequest();
        xhr.open('POST', requestpath);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                } else {
                    alert('存储失败：' + xhr.statusText);
                }
            }
        };
        xhr.send(JSON.stringify({'url': url, 'password': password, 'secretName': secretName}));
    }

    //删除订阅-白名单
    function deleteInputRow2(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u2')
    }

    //删除订阅-黑名单
    function deleteInputRow3(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u3')
    }

    //删除订阅-ipv4
    function deleteInputRow4(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u4')
    }

    //删除订阅-ipv6
    function deleteInputRow5(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u5')
    }

    //删除密码
    function deleteInputRow6(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u6')
    }

    //删除节点订阅
    function deleteInputRow8(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u8')
    }

    //删除订阅-节点远程配置
    function deleteInputRow9(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u9')
    }

    //删除订阅-节点后端服务器订阅
    function deleteInputRow10(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u10')
    }

    //删除关键字-M3U白名单
    function deleteInputRow11(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u11')
    }

    //删除关键字-M3U白名单优先级分组
    function deleteInputRow16(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u16')
    }

    //删除关键字-下载加密上传
    function deleteInputRow17(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u17')
    }

    //删除关键字-下载解密
    function deleteInputRow18(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u18')
    }


    //删除关键字-M3U黑名单
    function deleteInputRow15(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u15')
    }

    //删除DNS简易白名单
    function deleteInputRow12(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u12')
    }

    //删除DNS简易黑名单
    function deleteInputRow13(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u13')
    }

    //删除youtube直播源
    function deleteInputRow24(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u24')
    }

    //删除bilibili直播源
    function deleteInputRow25(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u25')
    }

    //删除huya直播源
    function deleteInputRow26(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u26')
    }

    //删除YY直播源
    function deleteInputRow27(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u27')
    }

    //删除TWITCH直播源
    function deleteInputRow28(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u28')
    }

    //删除DOUYIN直播源
    function deleteInputRow29(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u29')
    }

    //删除alist直播源
    function deleteInputRow30(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u30')
    }

    //删除加密订阅密码历史记录
    function deleteInputRow14(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u14')
    }

    //永久列表-删除输入行
    function deleteM3uInputRow(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletem3udata')
    }

    //删除订阅-M3U
    function deleteInputRow(row, inputValue) {
        deleteInputRowBase(row, inputValue, '/api/deletewm3u')
    }

    function deleteInputRowBase(row, inputValue, requestpath) {
        if (inputValue === null || inputValue === "") {
            row.remove();
        } else {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', requestpath);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                    } else {
                        alert('删除失败：' + xhr.statusText);
                    }
                }
            };
            xhr.send(JSON.stringify({'deleteurl': inputValue}));
            row.remove();
        }
    }

    // 定义方法A，接受一个函数名参数和一个参数数组
    function methodA(methodName, params) {
        // 使用apply()函数来执行传递进来的方法名对应的函数，并传递参数数组
        window[methodName].apply(null, params);
    }

    // 定义方法C，接受一个函数名参数和一个参数数组,有返回值
    function methodC(methodName, params) {
        // 使用apply()函数来执行传递进来的方法名对应的函数，并传递参数数组
        return window[methodName].apply(null, params)
    }

    function switchPassword17(url) {
        PostDataByAskAndReturn('/api/changeSubscribePassword2', url, '切换密码失败：')
            .then(function (returnValue) {
                return returnValue
            })
            .catch(function (error) {
                console.log(error);
                return ''
            });
    }

    function switchPassword18(url) {
        alert('该功能不提供修改数据权限');
    }

    //下载解密-关键字列表里按钮监听
    inputableAddEventListener2(inputTable18, 'saveInputValue18', 'deleteInputRow18', 'switchPassword18')
    //下载加密上传-关键字列表里按钮监听
    inputableAddEventListener2(inputTable17, 'saveInputValue17', 'deleteInputRow17', 'switchPassword17')
    //m3u白名单分组优先级-关键字列表里按钮监听
    inputableAddEventListener(inputTable16, 'saveInputValue16', 'deleteInputRow16')
    //m3u黑名单-关键字列表里按钮监听
    inputableAddEventListener(inputTable15, 'saveInputValue15', 'deleteInputRow15')
    //加密订阅密码历史记录
    inputableAddEventListener(inputTable14, 'saveInputValue14', 'deleteInputRow14')
    //youtube直播源
    inputableAddEventListener(inputTable24, 'saveInputValue24', 'deleteInputRow24')
    //bilibili直播源
    inputableAddEventListener(inputTable25, 'saveInputValue25', 'deleteInputRow25')
    //huya直播源
    inputableAddEventListener(inputTable26, 'saveInputValue26', 'deleteInputRow26')
    //YY直播源
    inputableAddEventListener(inputTable27, 'saveInputValue27', 'deleteInputRow27')
    //TWITCH直播源
    inputableAddEventListener(inputTable28, 'saveInputValue28', 'deleteInputRow28')
    //DOUYIN直播源
    inputableAddEventListener(inputTable29, 'saveInputValue29', 'deleteInputRow29')
    //alist直播源
    inputableAddEventListener(inputTable30, 'saveInputValue30', 'deleteInputRow30')
    //简易DNS黑名单
    inputableAddEventListener(inputTable13, 'saveInputValue13', 'deleteInputRow13')
    //简易DNS白名单
    inputableAddEventListener(inputTable12, 'saveInputValue12', 'deleteInputRow12')
    //m3u白名单-关键字列表里按钮监听
    inputableAddEventListener(inputTable11, 'saveInputValue11', 'deleteInputRow11')
    //节点后端服务器订阅-订阅列表里按钮监听
    inputableAddEventListener(inputTable10, 'saveInputValue10', 'deleteInputRow10')
    //节点远程配置文件订阅-订阅列表里按钮监听
    inputableAddEventListener(inputTable9, 'saveInputValue9', 'deleteInputRow9')
    //节点订阅-订阅列表里按钮监听
    inputableAddEventListener(inputTable8, 'saveInputValue8', 'deleteInputRow8')
    //密码本-订阅列表里按钮监听
    inputableAddEventListener(inputTable6, 'saveInputValue6', 'deleteInputRow6')
    //ipv6-订阅列表里按钮监听
    inputableAddEventListener(inputTable5, 'saveInputValue5', 'deleteInputRow5')
    //ipv4-订阅列表里按钮监听
    inputableAddEventListener(inputTable4, 'saveInputValue4', 'deleteInputRow4')
    //白名单-订阅列表里按钮监听
    inputableAddEventListener(inputTable2, 'saveInputValue2', 'deleteInputRow2')
    //黑名单-订阅列表里按钮监听
    inputableAddEventListener(inputTable3, 'saveInputValue3', 'deleteInputRow3')
    //超融合-订阅列表里按钮监听
    inputableAddEventListener(inputTable, 'saveInputValue', 'deleteInputRow')
    //永久列表-直播源列表增删按钮
    inputableAddEventListener(m3uTable, 'savem3uInputValue', 'deleteM3uInputRow')

    function inputableAddEventListener(inputTableTarget, saveInputValueBaseName, deleteInputRowBaseName) {
        inputTableTarget.addEventListener('click', (event) => {
            if (event.target.classList.contains('saveButtonClassName')) {
                var x = event.target.parentElement.parentElement.querySelectorAll('input');
                const inputValue = x[0].value.trim();
                if (inputValue === null || inputValue === "") {
                    // 空指针或者空字符串的情况
                    alert('请输入订阅地址');
                    return;
                }
                const tagnameval = x[1].value;
                methodA(saveInputValueBaseName, [inputValue, tagnameval]);
            }
            if (event.target.classList.contains('deleteButtonClassName')) {
                const row = event.target.parentElement.parentElement;
                var x = event.target.parentElement.parentElement.querySelectorAll('input');
                const inputValue = x[0].value;
                methodA(deleteInputRowBaseName, [row, inputValue]);
            }
        });
    }

    function inputableAddEventListener2(inputTableTarget, saveInputValueBaseName, deleteInputRowBaseName, changePassRowBaseName) {
        inputTableTarget.addEventListener('click', (event) => {
            if (event.target.classList.contains('saveButtonClassName2')) {
                var x = event.target.parentElement.parentElement.querySelectorAll('input');
                const inputValue = x[0].value.trim();
                if (inputValue === null || inputValue === "") {
                    // 空指针或者空字符串的情况
                    alert('请输入订阅地址');
                    return;
                }
                const tagnameval = x[1].value;
                const tagnameval2 = x[2].value.trim();
                methodA(saveInputValueBaseName, [inputValue, tagnameval, tagnameval2]);
            }
            if (event.target.classList.contains('deleteButtonClassName2')) {
                const row = event.target.parentElement.parentElement;
                var x = event.target.parentElement.parentElement.querySelectorAll('input');
                const inputValue = x[0].value;
                methodA(deleteInputRowBaseName, [row, inputValue]);
            }
            if (event.target.classList.contains('changePasswordButtonClassName')) {
                const row = event.target.parentElement.parentElement;
                var x = event.target.parentElement.parentElement.querySelectorAll('input');
                const inputValue = x[0].value;
                x[1].value = methodC(changePassRowBaseName, [inputValue])
            }
        });
    }

    //webdav同步账号-导入json配置
    fileInputAddEventListenerBase('upload-json-btn23', 'redisKeyWebdav', '/api/upload_json')
    //github同步账号-导入json配置
    fileInputAddEventListenerBase('upload-json-btn22', 'redisKeyGithub', '/api/upload_json')
    //gitee同步账号-导入json配置
    fileInputAddEventListenerBase('upload-json-btn21', 'redisKeyGitee', '/api/upload_json')
    //订阅密码锁-导入json配置
    fileInputAddEventListenerBase('upload-json-btn20', 'secretpassnow', '/api/upload_json')
    //加密订阅文件重命名-导入json配置
    fileInputAddEventListenerBase('upload-json-btn19', 'redisKeyFileName', '/api/upload_json')
    //网络下载配置加密上传-导入json配置
    fileInputAddEventListenerBase('upload-json-btn18', 'downloadAndDeSecretUrlPasswordAndName', '/api/upload_json')
    //youtube直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn24', 'redisKeyYoutube', '/api/upload_json')
    //bilibili直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn25', 'redisKeyBilibili', '/api/upload_json')
    //huya直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn26', 'redisKeyHuya', '/api/upload_json')
    //YY直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn27', 'redisKeyYY', '/api/upload_json')
    //TWITCH直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn28', 'redisKeyTWITCH', '/api/upload_json')
    //DOUYIN直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn29', 'redisKeyDOUYIN', '/api/upload_json')
    //alist直播源-导入json配置
    fileInputAddEventListenerBase('upload-json-btn30', 'redisKeyAlist', '/api/upload_json')
    //网络下载配置加密上传-导入json配置
    fileInputAddEventListenerBase('upload-json-btn17', 'downloadAndSecretUploadUrlPasswordAndName', '/api/upload_json')
    //m3u白名单分组优先级-导入json配置
    fileInputAddEventListenerBase('upload-json-btn16', 'm3uwhitelistrank', '/api/upload_json')
    //m3u黑名单-关键字-导入json配置
    fileInputAddEventListenerBase('upload-json-btn15', 'm3ublacklist', '/api/upload_json')
    //加密订阅密码历史记录-导入json配置
    fileInputAddEventListenerBase('upload-json-btn14', 'secretSubscribeHistoryPass', '/api/upload_json')
    //DNS简易黑名单-导入json配置
    fileInputAddEventListenerBase('upload-json-btn13', 'dnssimpleblacklist', '/api/upload_json')
    //DNS简易白名单-导入json配置
    fileInputAddEventListenerBase('upload-json-btn12', 'dnssimplewhitelist', '/api/upload_json')
    //m3u白名单-关键字-导入json配置
    fileInputAddEventListenerBase('upload-json-btn11', 'm3uwhitelist', '/api/upload_json')
    //节点订阅-后端地址配置订阅-导入json配置
    fileInputAddEventListenerBase('upload-json-btn10', 'proxiesserver', '/api/upload_json')
    //节点订阅-远程配置订阅-导入json配置
    fileInputAddEventListenerBase('upload-json-btn9', 'proxiesmodel', '/api/upload_json')
    //节点订阅-导入json配置
    fileInputAddEventListenerBase('upload-json-btn8', 'proxieslink', '/api/upload_json')
    //一键导入全部json配置
    fileInputAddEventListenerBase2('upload-json-btn7', '/api/upload_json_file7')
    //密码本-导入json配置
    fileInputAddEventListenerBase('upload-json-btn6', 'passwordlink', '/api/upload_json')
    //中国ipv6-导入json配置
    fileInputAddEventListenerBase('upload-json-btn5', 'whitelistipv6link', '/api/upload_json')
    //中国ipv4-导入json配置
    fileInputAddEventListenerBase('upload-json-btn4', 'whitelistipv4link', '/api/upload_json')
    //白名单-导入json配置
    fileInputAddEventListenerBase('upload-json-btn2', 'whitelistlink', '/api/upload_json')
    //黑名单-导入json配置
    fileInputAddEventListenerBase('upload-json-btn3', 'blacklistlink', '/api/upload_json')
    //超融合-导入json配置
    fileInputAddEventListenerBase('upload-json-btn', 'm3ulink', '/api/upload_json')

    function fileInputAddEventListenerBase2(fileInputBase, requestPath) {
        const downloadBtn = document.getElementById(fileInputBase);
        downloadBtn.addEventListener('change', (event) => {
            const file = event.target.files[0];
            // 使用 FileReader 读取 JSON 文件内容
            const reader = new FileReader();
            reader.onload = (event) => {
                const fileContent = event.target.result;
                // 将 JSON 文件上传至 Flask 后端
                fetch(requestPath, {
                    method: 'POST',
                    body: fileContent
                })
                    .then(response => response.json())
                    .then(data => console.log(data))
                    .catch(error => console.log(error));
            };
            reader.readAsText(file);
            location.reload()
        });
    }

    function fileInputAddEventListenerBase(fileInputBase, rediskey, requestpath) {
        const downloadBtn = document.getElementById(fileInputBase);
        downloadBtn.addEventListener('change', (event) => {
            const file = event.target.files[0];
            // 使用 FileReader 读取 JSON 文件内容
            const reader = new FileReader();
            reader.onload = (event) => {
                const fileContent = event.target.result;
                // 将 JSON 文件上传至 Flask 后端
                fetch(requestpath, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        rediskey: rediskey,
                        content: fileContent
                    })
                })
                    .then(response => response.json())
                    .then(data => console.log(data))
                    .catch(error => console.log(error));
            };
            reader.readAsText(file);
            location.reload()
        });
    }

    function removelinksBase(requestPath) {
        if (window.confirm('您确定要删除全部配置文件吗？')) {
            // 获取按钮
            const button = document.querySelector('button');
            // 禁用按钮
            button.disabled = true;
            fetch(requestPath)
                .then(response => response.text()) // 将响应转化为字符串
                .then(data => {
                    if (data === 'success') {
                        alert('本地订阅全部删除成功');
                    } else {
                        alert('本地订阅全部删除失败');
                    }
                });
            // 恢复按钮
            button.disabled = false;
            location.reload()
        }
    }

    // 永久列表-删除全部本地m3u文件
    function removem3u() {
        if (window.confirm('您确定要删除全部配置文件吗？')) {
            fetch('/api/removeallm3u')
                .then(response => response.text()) // 将响应转化为字符串
                .then(data => {
                    if (data === 'success') {
                        alert('本地永久直播源全部删除成功');
                    } else {
                        alert('本地永久直播源全部删除失败');
                    }
                });
            handleScroll()
        }
    }

    //永久列表-上传m3u文件
    m3ufileInput.addEventListener('change', async (e) => {
        e.preventDefault();
        const file = event.target.files[0];
        var formData = new FormData();
        formData.append('file', file);
        const response = await fetch('/api/upload_m3u_file', {
            method: 'POST',
            body: formData
        });
        if (response.ok) {
            alert('上传文件成功');
        } else {
            alert('上传文件失败');
        }
        document.getElementById('upload-m3u-btn').value = '';
        handleScroll()
    });

    //永久列表-合并粘贴板直播源
    function savem3uarea() {
        var text = document.getElementById("m3uarea").value;
        if (text === null || text === "") {
            // 空指针或者空字符串的情况
            alert('直播源为空');
        } else {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/api/savem3uarea');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        //const response = JSON.parse(xhr.responseText);
                        //alert('删除结果：' + response.deleteresult);
                    } else {
                        alert('合并粘贴板直播源失败：' + xhr.statusText);
                    }
                }
            };
            xhr.send(JSON.stringify({'m3utext': text}));
            handleScroll()
        }
    }

    //永久列表-从数据库拉取全部直播源
    //获取数据
    function getData() {
        return fetch('/api/getm3udata')
            .then(response => response.json())
            .then(data => Object.entries(data))
            .catch(error => console.error(error));
    }

    //渲染数据
    function renderData(data) {
        for (const [key, value] of data) {
            const row = document.createElement('tr');
            const valueCell = document.createElement('td');
            const taeinput = document.createElement('input');
            taeinput.type = 'text';
            taeinput.classList.add('subm3uname');
            taeinput.value = key;
            valueCell.appendChild(taeinput);
            valueCell.append(document.createElement('br'))
            const valueInput = document.createElement('input');
            valueInput.type = 'text';
            valueInput.classList.add('subm3uUrl');
            valueInput.value = value;
            valueCell.appendChild(valueInput);
            valueCell.append(document.createElement('br'))

            const actionsCell = document.createElement('td');
            const saveButton = document.createElement('button');
            saveButton.textContent = '保存';
            saveButton.classList.add('saveButtonClassName');
            const deleteButton = document.createElement('button');
            deleteButton.textContent = '删除';
            deleteButton.classList.add('deleteButtonClassName');
            actionsCell.appendChild(saveButton);
            actionsCell.appendChild(deleteButton);
            row.appendChild(valueCell);
            row.appendChild(actionsCell);
            currentBatchData.push(row);
        }
        currentBatch++;
        if (currentBatchData.length > 0) {
            if (currentBatch === 1) {
                tbody.append(...currentBatchData);
            } else {
                currentBatchData.forEach(row => tbody.appendChild(row));
            }
            currentBatchData = [];
        }
    }

    //滚动加载
    function handleScroll() {
        const {scrollTop, clientHeight, scrollHeight} = document.documentElement;
        if (scrollTop + clientHeight >= scrollHeight - 5 && currentBatchData.length === 0) {
            getData()
                .then(data => {
                    if (data.length > 0) {
                        renderData(data.slice((currentBatch - 1) * batchSize, currentBatch * batchSize));
                    }
                });
        }
    }

    // 切换页面
    switchbox.addEventListener("change", () => {
        // Get selected page
        const selectedPage = document.querySelector('input[name="page"]:checked').id;

        // Hide all pages except for the selected one
        for (let i = 0; i < pages.length; i++) {
            if (pages[i].id === selectedPage) {
                pages[i].style.display = "block";
                reloadPageDataById(selectedPage);
            } else {
                pages[i].style.display = "none";
            }
        }
    });

    //只在切换到对应页面时进行对应页面查询
    function reloadPageDataById(selectedPage) {
        if (selectedPage === pages[0].id) {
            reload()
        } else if (selectedPage === pages[1].id) {
            //将 handleScroll 函数绑定到 window 的 scroll 事件上，以便在用户滚动窗口时触发
            window.addEventListener('scroll', handleScroll);
            //handleScroll()
        } else if (selectedPage === pages[2].id) {
            reloadPasswordList()
        } else if (selectedPage === pages[4].id) {
            reloadWhiteListLink()
        } else if (selectedPage === pages[5].id) {
            reloadBlackListLink()
        } else if (selectedPage === pages[6].id) {
            reloadIpv4ListLink()
        } else if (selectedPage === pages[7].id) {
            reloadIpv6ListLink()
        } else if (selectedPage === pages[9].id) {
            // 这里面有查询有问题，暂时不管
            reloadProxiesListLink()
            // 加载代理类型:clash/v2ray/ss/ssr...
            reloadSelectedButtonId()
            // 节点订阅-加载选择的远程配置
            reloadSelectedModel()
            // 节点订阅-加载选择的服务器配置
            reloadSelectedServer()
            reloadProxyModelListLink()
            reloadProxyServerListLink()
        } else if (selectedPage === pages[10].id) {
            reloadProxyModelListLink()
        } else if (selectedPage === pages[11].id) {
            reloadProxyServerListLink()
        } else if (selectedPage === pages[12].id) {
            reloadThreadNum()
            reloadChinaDnsServer()
            reloadExtraDnsServer()
            reloadExtraDnsPort()
            reloadChinaDnsPort()
            reloadQueryThreadNum()
            reloadTimeout()
            getFileName('chinaTopDomain', 'chinaTopDomain', chinaTopDomain)
            getFileName('foreignTopDomain', 'foreignTopDomain', foreignTopDomain)
            getFileName('dnsMode', 'dnsMode', dnsMode)
        } else if (selectedPage === pages[13].id) {
            reloadThreadNum2()
            reloadChinaDnsServer2()
            reloadChinaDnsPort2()
            reloadExtraDnsServer2()
            reloadExtraDnsPort2()
            reloadExtraDnsPort3()
            reloadHistorySubscribePassList()
        } else if (selectedPage === pages[14].id) {
            getSyncData('username', 'bbs', 'giteeUsername', giteeUsername)
            getSyncData('reponame', 'bbs', 'giteeRePoname', giteeRePoname)
            getSyncData('path', 'bbs', 'giteePath', giteePath)
            getSyncData('accesstoken', 'bbs', 'giteeAcessToken', giteeAcessToken)
            getSyncData('username', 'pps', 'githubUsername', githubUsername)
            getSyncData('reponame', 'pps', 'githubRePoname', githubRePoname)
            getSyncData('path', 'pps', 'githubPath', githubPath)
            getSyncData('accesstoken', 'pps', 'githubAcessToken', githubAcessToken)
            getSyncData('username', 'lls', 'webdavUsername', webdavUsername)
            getSyncData('password', 'lls', 'webdavPassword', webdavPassword)
            getSyncData('ip', 'lls', 'webdavIp', webdavIp)
            getSyncData('port', 'lls', 'webdavPort', webdavPort)
            getSyncData('path', 'lls', 'webdavPath', webdavPath)
            getSyncData('agreement', 'lls', 'webdavAgreement', webdavAgreement)
        } else if (selectedPage === pages[15].id) {
            reloadM3uWhiteList()
        } else if (selectedPage === pages[16].id) {
            getFileName('minTimeout', 'minTimeout', minTimeout)
            getFileName('maxTimeout', 'maxTimeout', maxTimeout)
            getFileName('usernameSys', 'usernameSys', usernameSys)
            getFileName('passwordSys', 'passwordSys', passwordSys)
            getFileName('normalM3uClock', 'normalM3uClock', normalM3uClock)
            getFileName('normalSubscriberClock', 'normalSubscriberClock', normalSubscriberClock)
            getFileName('proxySubscriberClock', 'proxySubscriberClock', proxySubscriberClock)
            getFileName('spM3uClock', 'spM3uClock', spM3uClock)
            getFileName('autoDnsSwitchClock', 'autoDnsSwitchClock', autoDnsSwitchClock)
            getFileName('syncClock', 'syncClock', syncClock)
            getFileName('reliveAlistTsTime', 'reliveAlistTsTime', reliveAlistTsTime)
        } else if (selectedPage === pages[17].id) {
            //生成有效M3U
            reloadFunctionOpenButton('switch')
            //全部M3U加密
            reloadFunctionOpenButton('switch2')
            //完整M3U加密上传
            reloadFunctionOpenButton('switch3')
            //生成全部M3U
            reloadFunctionOpenButton('switch4')
            //生成白名单M3U
            reloadFunctionOpenButton('switch5')
            //M3U域名-无加密
            reloadFunctionOpenButton('switch6')
            //m3u域名加密文件上传
            reloadFunctionOpenButton('switch7')
            //m3u域名加密文件生成
            reloadFunctionOpenButton('switch8')
            //域名白名单生成dnsmasq加密文件
            reloadFunctionOpenButton('switch9')
            //dnsmasq加密文件上传
            reloadFunctionOpenButton('switch10')
            //域名白名单-加密上传
            reloadFunctionOpenButton('switch11')
            //域名白名单-加密
            reloadFunctionOpenButton('switch12')
            //域名黑名单-定时器
            reloadFunctionOpenButton('switch13')
            //域名黑名单-openclash-加密
            reloadFunctionOpenButton('switch14')
            //域名黑名单-openclash-加密-上传
            reloadFunctionOpenButton('switch15')
            //域名黑名单-加密
            reloadFunctionOpenButton('switch16')
            //域名黑名单-加密-上传
            reloadFunctionOpenButton('switch17')
            //ipv4-加密
            reloadFunctionOpenButton('switch18')
            //ipv4-加密-上传
            reloadFunctionOpenButton('switch19')
            //ipv6-加密
            reloadFunctionOpenButton('switch20')
            //ipv6-加密-上传
            reloadFunctionOpenButton('switch21')
            //节点订阅-加密
            reloadFunctionOpenButton('switch22')
            //节点订阅+-加密-上传
            reloadFunctionOpenButton('switch23')
            //自动生成简易DNS黑白名单
            reloadFunctionOpenButton('switch24')
            //m3u-定时器
            reloadFunctionOpenButton('switch25')
            //域名白名单-定时器
            reloadFunctionOpenButton('switch26')
            //ipv4-定时器
            reloadFunctionOpenButton('switch27')
            //ipv6-定时器
            reloadFunctionOpenButton('switch28')
            //上传选项1-Gitee
            reloadFunctionOpenButton('switch30')
            //上传选项2-Github
            reloadFunctionOpenButton('switch31')
            //上传选项3-Webdav
            reloadFunctionOpenButton('switch32')
            //下载加密上传-定时器
            reloadFunctionOpenButton('switch33')
            //下载解密-定时器
            reloadFunctionOpenButton('switch34')
            //youtube-定时器
            reloadFunctionOpenButton('switch35')
        } else if (selectedPage === pages[18].id) {
            reloadDNSSIMPLEWhiteList()
        } else if (selectedPage === pages[19].id) {
            reloadDNSSIMPLEBlackList()
        } else if (selectedPage === pages[20].id) {
            // 打赏图片
            reloadImage()
        } else if (selectedPage === pages[22].id) {
            reloadM3uBlackList()
        } else if (selectedPage === pages[23].id) {
            reloadM3uWhiteListRank()
        } else if (selectedPage === pages[24].id) {
            reloadDownLoadAndSecretUpload()
        } else if (selectedPage === pages[25].id) {
            reloadDownLoadAndDeSecret()
        } else if (selectedPage === pages[26].id) {
            reloadYoutubeM3U()
        } else if (selectedPage === pages[27].id) {
            reloadBilibiliM3U()
        } else if (selectedPage === pages[28].id) {
            reloadHuyaM3U()
        } else if (selectedPage === pages[29].id) {
            reloadYYM3U()
        } else if (selectedPage === pages[30].id) {
            reloadTWITCHM3U()
        }else if (selectedPage === pages[31].id) {
            reloadDOUYINM3U()
        }else if (selectedPage === pages[32].id) {
            reloadAlistM3U()
        }
        if (selectedPage !== pages[1].id) {
            window.removeEventListener('scroll', handleScroll);
        }
    }

    function init() {
        reload()
        reloadIP()
    }

    // 超融合-工具-上传m3u文件-自动下载格式规整化的m3u文件
    formsAddEventListener(forms[0], '/api/process-file', 'tmp.m3u', 'upload-m3u')
    // 超融合-工具-上传m3u文件-把直播频道名字全部归类成一类分组并且写入m3u白名单
    formsAddEventListener2(forms[2], '/api/process-file2', 'group.json', 'upload-m3u-group', 'upload-m3u-data')
    // 超融合-工具-上传txt文件-把直播频道名字全部归类成一类分组并且写入m3u白名单
    formsAddEventListener2(forms[3], '/api/process-file3', 'group.json', 'upload-m3u-group-txt', 'upload-m3u-data-txt')
    // 超融合-工具-上传m3u文件-m3u格式转txt格式
    formsAddEventListener(forms[4], '/api/process-file4', 'source.txt', 'upload-m3u-to-txt')

    //上传文件+字符串后返回字符串
    function formsAddEventListener2(formtarget, requestpath, filename, datainputId, uploadbtnId) {
        formtarget.addEventListener('submit', async (e) => {
            e.preventDefault();

            // 获取上传文件和输入的字符串
            const formData = new FormData(formtarget);
            //const file = formData.get('file');
            const data = document.getElementById(datainputId).value;

            // 将输入的字符串加入到表单数据中
            formData.set('data', data);

            const response = await fetch(requestpath, {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                // 创建 a 元素
                const a = document.createElement('a');
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            } else {
                alert('上传文件失败');
            }

            // 重置表单数据
            //formtarget.reset();
            document.getElementById(uploadbtnId).value = '';
        });
    }



    // 上传文件处理后自动下载
    function formsAddEventListener(formtarget, requestpath, filename, uploadbtnId) {
        formtarget.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(formtarget);
            const response = await fetch(requestpath, {
                method: 'POST',
                body: formData
            });
            if (response.ok) {
                // 创建 a 元素
                const a = document.createElement('a');
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            } else {
                alert('上传文件失败');
            }
            document.getElementById(uploadbtnId).value = '';
        });
    }

    // webdav账号-导出json配置
    downloadBtnAddEventListenerBase('download-json-btn23', 'redisKeyWebdav')
    // gitee账号-导出json配置
    downloadBtnAddEventListenerBase('download-json-btn22', 'redisKeyGithub')
    // gitee账号-导出json配置
    downloadBtnAddEventListenerBase('download-json-btn21', 'redisKeyGitee')
    // 订阅密码锁-导出json配置
    downloadBtnAddEventListenerBase('download-json-btn20', 'secretpassnow')
    // 下载解密-导出加密文件重命名json配置
    downloadBtnAddEventListenerBase('download-json-btn19', 'redisKeyFileName')
    // 下载解密-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn18', 'downloadAndDeSecretUrlPasswordAndName')
    // youtube直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn24', 'redisKeyYoutube')
    // bilibili直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn25', 'redisKeyBilibili')
    // huya直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn26', 'redisKeyHuya')
    // YY直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn27', 'redisKeyYY')
    // twitch直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn28', 'redisKeyTWITCH')
    // DOUYIN直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn29', 'redisKeyDOUYIN')
    // alist直播源-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn30', 'redisKeyAlist')
    // 下载加密上传-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn17', 'downloadAndSecretUploadUrlPasswordAndName')
    // M3U白名单分组优先级-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn16', 'm3uwhitelistrank')
    // M3U黑名单-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn15', 'm3ublacklist')
    // 加密订阅密码历史记录-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn14', 'secretSubscribeHistoryPass')
    // DNS简易黑名单-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn13', 'dnssimpleblacklist')
    // DNS简易白名单-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn12', 'dnssimplewhitelist')
    // M3U白名单-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn11', 'm3uwhitelist')
    // 超融合节点后端服务器订阅-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn10', 'proxiesserver')
    // 超融合节点远程配置订阅-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn9', 'proxiesmodel')
    // 超融合节点订阅-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn8', 'proxieslink')
    // 超融合M3U-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn', 'm3ulink')
    // 超融合域名白名单-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn2', 'whitelistlink')
    // 超融合域名黑名单-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn3', 'blacklistlink')
    // 超融合IPV4-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn4', 'whitelistipv4link')
    // 超融合IPV6-导出订阅json配置
    downloadBtnAddEventListenerBase('download-json-btn5', 'whitelistipv6link')
    // 密码本-导出json配置
    downloadBtnAddEventListenerBase('download-json-btn6', 'passwordlink')
    // 导出所有json配置
    downloadBtnAddEventListenerBase2('download-json-btn7', '/api/download_json_file7', 'allData.zip')
    // 永久列表-导出永久列表
    downloadBtnAddEventListenerBase2('download-m3u-btn', '/api/download_m3u_file', 'temp_m3u.m3u')

    function downloadBtnAddEventListenerBase2(downloadBtnBase, requestPath, jsonName) {
        const downloadBtn = document.getElementById(downloadBtnBase);
        downloadBtn.addEventListener('click', () => {
            fetch(requestPath)
                .then(response => response.blob())
                .then(data => {
                    // 创建 a 元素
                    const a = document.createElement('a');
                    const url = window.URL.createObjectURL(new Blob([data]));
                    a.href = url;
                    a.download = jsonName;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                })
                .catch(error => console.log(error));
        });
    }

    function downloadBtnAddEventListenerBase(downloadBtnBase, jsonName) {
        const downloadBtn = document.getElementById(downloadBtnBase);
        downloadBtn.addEventListener('click', () => {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/api/download_config');
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            xhr.responseType = 'blob';

            xhr.onload = function () {
                if (xhr.status === 200) {
                    const blob = new Blob([xhr.response], {type: 'application/json'});
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `${jsonName}.json`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                } else {
                    console.error(xhr.statusText);
                }
            };
            xhr.onerror = function () {
                console.error(xhr.statusText);
            };

            // 在这里定义要发送给后端的数据。
            const data = {protocol: jsonName};
            xhr.send(JSON.stringify(data));
        });
    }

    //下载解密-只添加一行列表，不存储数据
    addRowButtonAddEventListener2(addRowButton18, inputTable18)
    //下载加密上传-只添加一行列表，不存储数据
    addRowButtonAddEventListener2(addRowButton17, inputTable17)
    //M3U白名单分组优先级-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton16, inputTable16)
    //M3U黑名单-关键字-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton15, inputTable15)
    //DNS简易黑名单-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton13, inputTable13)
    //youtube直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton24, inputTable24)
    //bilibili直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton25, inputTable25)
    //huya直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton26, inputTable26)
    //YY直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton27, inputTable27)
    //TWITCH直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton28, inputTable28)
    //DOUYIN直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton29, inputTable29)
    //alist直播源-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton30, inputTable30)
    //DNS简易白名单-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton12, inputTable12)
    //M3U白名单-关键字-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton11, inputTable11)
    //节点订阅-后端地址配置-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton10, inputTable10)
    //节点订阅-远程配置-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton9, inputTable9)
    //节点订阅-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton8, inputTable8)
    //密码本-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton6, inputTable6)
    //中国ipv6-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton5, inputTable5)
    //中国ipv4-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton4, inputTable4)
    //白名单-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton2, inputTable2)
    //黑名单-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton3, inputTable3)
    //超融合-只添加一行列表，不存储数据
    addRowButtonAddEventListener(addRowButton, inputTable)

    function addRowButtonAddEventListener(addRowButtonBase, inputTableBase) {
        addRowButtonBase.addEventListener('click', () => {
            const newRow = methodC('createInputRow', ['suburlclassname', 'subnameClassName', 'saveButtonClassName', 'deleteButtonClassName']);
            inputTableBase.querySelector('tbody').prepend(newRow);
        });
    }

    function addRowButtonAddEventListener2(addRowButtonBase, inputTableBase) {
        addRowButtonBase.addEventListener('click', () => {
            const newRow = methodC('createInputRow2', ['suburlclassname2', 'passwordClassName2', 'subnameClassName2', 'changePasswordButtonClassName', 'saveButtonClassName2', 'deleteButtonClassName2']);
            inputTableBase.querySelector('tbody').prepend(newRow);
        });
    }

    function createInputRow2(subUrlClassName, passwordClassName2, subnameClassName, changePasswordButtonClassName, savebuttonClassName, deletebuttonClassName) {
        const row = document.createElement('tr');
        const valueCell = document.createElement('td');
        const valueInput = document.createElement('input');
        valueInput.type = 'text';
        valueInput.classList.add(subUrlClassName);
        valueCell.appendChild(valueInput);
        const taeinput = document.createElement('input');
        taeinput.type = 'text';
        taeinput.classList.add(passwordClassName2);
        valueCell.appendChild(taeinput);
        const taeinput2 = document.createElement('input');
        taeinput2.type = 'text';
        taeinput2.classList.add(subnameClassName);
        valueCell.appendChild(taeinput2);
        const actionsCell = document.createElement('td');
        const changePasswordButton = document.createElement('button');
        changePasswordButton.textContent = '换密码';
        changePasswordButton.classList.add(changePasswordButtonClassName);
        const saveButton = document.createElement('button');
        saveButton.textContent = '保存';
        saveButton.classList.add(savebuttonClassName);
        const deleteButton = document.createElement('button');
        deleteButton.textContent = '删除';
        deleteButton.classList.add(deletebuttonClassName);
        actionsCell.appendChild(changePasswordButton);
        actionsCell.appendChild(saveButton);
        actionsCell.appendChild(deleteButton);
        row.appendChild(valueCell);
        row.appendChild(actionsCell);
        return row;
    }

    //超融合-新增输入框
    function createInputRow(subUrlClassName, subnameClassName, savebuttonClassName, deletebuttonClassName) {
        const row = document.createElement('tr');
        const valueCell = document.createElement('td');
        const valueInput = document.createElement('input');
        valueInput.type = 'text';
        valueInput.classList.add(subUrlClassName);
        valueCell.appendChild(valueInput);
        const taeinput = document.createElement('input');
        taeinput.type = 'text';
        taeinput.classList.add(subnameClassName);
        valueCell.appendChild(taeinput);
        const actionsCell = document.createElement('td');
        const saveButton = document.createElement('button');
        saveButton.textContent = '保存';
        saveButton.classList.add(savebuttonClassName);
        const deleteButton = document.createElement('button');
        deleteButton.textContent = '删除';
        deleteButton.classList.add(deletebuttonClassName);
        actionsCell.appendChild(saveButton);
        actionsCell.appendChild(deleteButton);
        row.appendChild(valueCell);
        row.appendChild(actionsCell);
        return row;
    }

    //超融合-m3u
    function execute() {
        executeBase('/api/chaoronghe')
    }

    //超融合-域名白名单
    function execute2() {
        executeBase('/api/chaoronghe2')
    }

    //超融合-域名黑名单
    function execute3() {
        executeBase('/api/chaoronghe3')
    }

    //超融合-ipv4
    function execute4() {
        executeBase('/api/chaoronghe4')
    }

    //超融合-ipv6
    function execute5() {
        executeBase('/api/chaoronghe5')
    }

    //超融合-节点订阅
    function execute6() {
        executeBase('/api/chaoronghe6')
    }

    //超融合-简易DNS黑名单
    function execute7() {
        executeBase('/api/chaoronghe7')
    }

    //超融合-简易DNS黑名单
    function execute8() {
        executeBase('/api/chaoronghe8')
    }

    //超融合-下载+加密上传至同步账号
    function execute9() {
        executeBase('/api/chaoronghe9')
    }

    //超融合-下载+解密
    function execute10() {
        executeBase('/api/chaoronghe10')
    }

    //超融合-youtube直播源生成
    function execute24() {
        executeBase('/api/chaoronghe24')
    }

    //超融合-bilibili直播源生成
    function execute25() {
        executeBase('/api/chaoronghe25')
    }

    //超融合-huya直播源生成
    function execute26() {
        executeBase('/api/chaoronghe26')
    }

    //超融合-YY直播源生成
    function execute27() {
        executeBase('/api/chaoronghe27')
    }

    //超融合-YY直播源生成
    function execute28() {
        executeBase('/api/chaoronghe28')
    }

    //超融合-DOUYIN直播源生成
    function execute29() {
        executeBase('/api/chaoronghe29')
    }

    //超融合-alist直播源生成
    function execute30() {
        executeBase('/api/chaoronghe30')
    }

    function executeBase(requestPath) {
        // 获取按钮
        const button = document.querySelector('button');
        // 禁用按钮
        button.disabled = true;
        fetch(requestPath)
            .then(response => response.text()) // 将响应转化为字符串
            .then(data => {
                if (data === 'empty') {
                    alert('超融合失败');
                } else {
                    alert('超融合成功');
                }
            });
        // 恢复按钮
        button.disabled = false;
    }

    function generatePasswords() {
        // 获取输入框的值
        var passwordLength = document.getElementById("password-length").value;
        var numOfPasswords = document.getElementById("num-of-passwords").value;
        var selectedChars = "";
        var passwordList = "";

        // 获取选中的字符集
        if (document.getElementById("numbers").checked) {
            selectedChars += "0123456789";
        }
        if (document.getElementById("upper-case").checked) {
            selectedChars += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        }
        if (document.getElementById("lower-case").checked) {
            selectedChars += "abcdefghijklmnopqrstuvwxyz";
        }
        if (document.getElementById("special-chars").checked) {
            selectedChars += "!@#$%^&*()_+-=[]{}\\|;':\",./<>?";
        }

        // 如果没有选中任何字符集，弹出警告并返回
        if (selectedChars === "") {
            alert("请至少选择一个字符集！");
            return;
        }

        // 生成密码
        for (var i = 0; i < numOfPasswords; i++) {
            var password = "";
            for (var j = 0; j < passwordLength; j++) {
                var randomIndex = Math.floor(Math.random() * selectedChars.length);
                password += selectedChars.charAt(randomIndex);
            }
            passwordList += password + "\n";
        }

        // 将密码列表添加到文本区域中
        document.getElementById("password-list").value = passwordList;
    }

    function removeDuplicates() {
        const inputTextArea = document.getElementById("input2");
        const outputTextArea = document.getElementById("output2");
        const inputLines = inputTextArea.value.split("\n");
        const uniqueLines = new Set(inputLines);
        outputTextArea.value = [...uniqueLines].join("\n");
    }

    function encode() {
        var input = document.getElementById("input").value;
        var output = btoa(input);
        document.getElementById("output").value = output;
    }

    function decode() {
        var input = document.getElementById("input").value;
        var output = atob(input);
        document.getElementById("output").value = output;
    }

</script>
</body>
</html>
